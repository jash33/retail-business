
ðŸ”§ Tool: Task
Input: {
  "description": "Explore codebase structure",
  "prompt": "I need to implement a lookbook-style grid component with mixed aspect ratios, text overlays, and shoppable product tags. First, explore the codebase to understand:\n\n1. The overall project structure (what framework is being used - React, Vue, etc.)\n2. Existing component patterns and conventions\n3. Any existing grid or gallery components that I can reference\n4. Styling approach (CSS modules, styled-components, Tailwind, etc.)\n5. Any existing product or e-commerce related components\n\nPlease provide a comprehensive overview of the codebase structure and conventions I should follow.",
  "subagent_type": "Explore"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\package.json"
}

ðŸ”§ Tool: Glob
Input: {
  "pattern": "**/*.json"
}

ðŸ”§ Tool: Glob
Input: {
  "pattern": "src/**/*.{astro,tsx,jsx,ts,js}"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\astro.config.mjs"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\layouts\\Layout.astro"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\components\\ProductCard.astro"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\components\\ProductGrid.astro"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\components\\ImageGallery.astro"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\styles\\variables.css",
  "limit": 100
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\types\\product.ts"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\components\\CollectionCard.astro",
  "limit": 80
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\components\\InstagramGrid.astro",
  "limit": 80
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\styles\\globals.css",
  "limit": 80
}

ðŸ”§ Tool: Glob
Input: {
  "pattern": "src/**/*.ts"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\config\\shop.config.ts"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\utils\\shop-tracking.ts"
}

ðŸ”§ Tool: Bash
Input: {
  "command": "find \"C:\\Users\\James\\Repos\\retail-business\\src\" -type f -name \"*.astro\" | head -20"
}
Now I have a comprehensive understanding of the codebase. Let me plan and implement the lookbook-style grid component. I'll start by reading some of the key referenced files to understand the exact patterns used.

ðŸ”§ Tool: Read
Input: {
  "file_path": "/Users/brianhenry/code/retail-business/src/components/ProductGrid.astro"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "/Users/brianhenry/code/retail-business/src/components/CollectionCard.astro"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "/Users/brianhenry/code/retail-business/src/types/product.ts"
}
Let me find the actual project structure:

ðŸ”§ Tool: Glob
Input: {
  "pattern": "**/*.astro"
}

ðŸ”§ Tool: Glob
Input: {
  "pattern": "**/package.json"
}

ðŸ”§ Tool: Bash
Input: {
  "command": "ls -la",
  "description": "List files in current directory"
}
Now I can see the project structure. Let me read the relevant existing components to understand the patterns:

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\components\\ProductGrid.astro"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\components\\CollectionCard.astro"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\components\\ProductCard.astro"
}
Now let me read the types and utility files to understand the patterns better:

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\types\\product.ts"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\utils\\shop-tracking.ts"
}

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\styles\\variables.css"
}
Now let me look at the shop types file:

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\types\\shop.ts"
}

ðŸ”§ Tool: Glob
Input: {
  "pattern": "src/types/*.ts"
}
Now I have a comprehensive understanding of the codebase. Let me create the lookbook-style grid component with mixed aspect ratios, text overlays, and shoppable product tags. I'll create:

1. Type definitions for the lookbook component
2. The main LookbookGrid component
3. A demo page for showcasing the component

ðŸ”§ Tool: TodoWrite
Input: {
  "todos": [
    {
      "content": "Create lookbook type definitions in src/types/lookbook.ts",
      "status": "in_progress",
      "activeForm": "Creating lookbook type definitions"
    },
    {
      "content": "Create LookbookGrid component in src/components/LookbookGrid.astro",
      "status": "pending",
      "activeForm": "Creating LookbookGrid component"
    },
    {
      "content": "Create demo page for lookbook grid at src/pages/demo/lookbook-grid.astro",
      "status": "pending",
      "activeForm": "Creating demo page"
    }
  ]
}

ðŸ”§ Tool: Write
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\types\\lookbook.ts",
  "content": "/**\n * =================================================================\n * LOOKBOOK GRID TYPE DEFINITIONS\n * =================================================================\n *\n * TypeScript types for lookbook-style grid components with mixed\n * aspect ratios, text overlays, and shoppable product tags. Designed\n * for creating curated seasonal collections or style guides.\n *\n * =================================================================\n */\n\nimport type { UTMParams } from './shop';\nimport type { ProductImage, ProductPrice } from './product';\n\n// =================================================================\n// ASPECT RATIO TYPES\n// =================================================================\n\n/**\n * Supported aspect ratios for lookbook items\n * Allows for mixed layouts with various image proportions\n */\nexport type LookbookAspectRatio =\n  | '1:1'      // Square - perfect for product shots\n  | '4:5'      // Portrait - standard product cards\n  | '3:4'      // Taller portrait - editorial style\n  | '16:9'     // Landscape - banner style\n  | '2:3'      // Tall portrait - magazine style\n  | '9:16'     // Vertical/Story - social media inspired\n  | '3:2';     // Landscape - photography standard\n\n// =================================================================\n// TEXT OVERLAY TYPES\n// =================================================================\n\n/**\n * Position options for text overlays on lookbook items\n */\nexport type OverlayPosition =\n  | 'top-left'\n  | 'top-center'\n  | 'top-right'\n  | 'center-left'\n  | 'center'\n  | 'center-right'\n  | 'bottom-left'\n  | 'bottom-center'\n  | 'bottom-right';\n\n/**\n * Text overlay configuration for lookbook items\n */\nexport interface LookbookTextOverlay {\n  /** Main heading text */\n  heading?: string;\n  /** Subheading or tagline */\n  subheading?: string;\n  /** Call-to-action text */\n  ctaText?: string;\n  /** Position of the overlay */\n  position?: OverlayPosition;\n  /** Theme variant for text styling */\n  theme?: 'light' | 'dark' | 'gradient';\n  /** Text alignment */\n  alignment?: 'left' | 'center' | 'right';\n}\n\n// =================================================================\n// PRODUCT TAG TYPES\n// =================================================================\n\n/**\n * Shoppable product tag configuration\n * Positioned absolutely on the lookbook item image\n */\nexport interface ProductTag {\n  /** Unique identifier for the tag */\n  id: string;\n  /** Product name */\n  name: string;\n  /** Product price */\n  price: ProductPrice;\n  /** Horizontal position as percentage (0-100) */\n  x: number;\n  /** Vertical position as percentage (0-100) */\n  y: number;\n  /** Direct URL to the product page */\n  shopUrl: string;\n  /** Optional product image for tooltip preview */\n  image?: ProductImage;\n  /** Optional product description */\n  description?: string;\n  /** UTM parameters for tracking */\n  utmParams?: UTMParams;\n  /** Whether to open link in new tab */\n  openInNewTab?: boolean;\n}\n\n// =================================================================\n// LOOKBOOK ITEM TYPES\n// =================================================================\n\n/**\n * Size/span configuration for grid items\n */\nexport interface LookbookItemSize {\n  /** Number of columns the item spans */\n  colSpan?: 1 | 2 | 3;\n  /** Number of rows the item spans */\n  rowSpan?: 1 | 2 | 3;\n}\n\n/**\n * Individual lookbook item configuration\n */\nexport interface LookbookItem {\n  /** Unique identifier for the item */\n  id: string;\n  /** Main image for the lookbook item */\n  image: ProductImage;\n  /** Alt text for the image (required for accessibility) */\n  alt?: string;\n  /** Aspect ratio for the image */\n  aspectRatio?: LookbookAspectRatio;\n  /** Size/span in the grid */\n  size?: LookbookItemSize;\n  /** Whether this is a featured item */\n  featured?: boolean;\n  /** Text overlay configuration */\n  textOverlay?: LookbookTextOverlay;\n  /** Shoppable product tags */\n  productTags?: ProductTag[];\n  /** Optional link for the entire item */\n  href?: string;\n  /** UTM parameters for tracking */\n  utmParams?: UTMParams;\n  /** Whether to open link in new tab */\n  openInNewTab?: boolean;\n  /** Optional category/collection label */\n  category?: string;\n  /** Optional \"new\" badge */\n  isNew?: boolean;\n  /** Additional CSS class names */\n  class?: string;\n}\n\n// =================================================================\n// LOOKBOOK GRID PROPS\n// =================================================================\n\n/**\n * Grid layout variants for different display styles\n */\nexport type LookbookLayout =\n  | 'standard'        // Even grid layout\n  | 'masonry'         // Pinterest-style staggered grid\n  | 'featured-first'  // First item larger\n  | 'editorial'       // Magazine-style mixed sizes\n  | 'gallery';        // Photo gallery style\n\n/**\n * Props for LookbookGrid component\n */\nexport interface LookbookGridProps {\n  /** Array of lookbook items to display */\n  items: LookbookItem[];\n  /** Number of columns at desktop size (2-4) */\n  columns?: 2 | 3 | 4;\n  /** Gap between items */\n  gap?: 'small' | 'medium' | 'large' | 'none';\n  /** Grid layout variant */\n  layout?: LookbookLayout;\n  /** Section heading */\n  heading?: string;\n  /** Section subheading/description */\n  subheading?: string;\n  /** Section ID for anchor links */\n  id?: string;\n  /** Additional CSS class names */\n  class?: string;\n  /** Enable stagger animation for items */\n  enableAnimation?: boolean;\n  /** Maximum items to animate with stagger */\n  maxStaggerItems?: number;\n  /** Show product tags by default (vs on hover) */\n  showTagsByDefault?: boolean;\n  /** Enable tag tooltips */\n  enableTooltips?: boolean;\n  /** Responsive column overrides */\n  responsiveColumns?: {\n    /** Columns at mobile breakpoint (< 480px) */\n    mobile?: 1 | 2;\n    /** Columns at tablet breakpoint (480px - 767px) */\n    tablet?: 2 | 3;\n    /** Columns at desktop breakpoint (768px+) */\n    desktop?: 2 | 3 | 4;\n  };\n}\n\n// =================================================================\n// UTILITY FUNCTIONS\n// =================================================================\n\n/**\n * Get aspect ratio as a CSS-compatible string\n * @param ratio - Aspect ratio type\n * @returns CSS aspect-ratio value (e.g., \"4 / 5\")\n */\nexport function getLookbookAspectRatioCss(ratio: LookbookAspectRatio): string {\n  switch (ratio) {\n    case '1:1':\n      return '1 / 1';\n    case '4:5':\n      return '4 / 5';\n    case '3:4':\n      return '3 / 4';\n    case '16:9':\n      return '16 / 9';\n    case '2:3':\n      return '2 / 3';\n    case '9:16':\n      return '9 / 16';\n    case '3:2':\n      return '3 / 2';\n    default:\n      return '4 / 5';\n  }\n}\n\n/**\n * Get overlay position CSS class suffix\n * @param position - Overlay position\n * @returns CSS class suffix\n */\nexport function getOverlayPositionClass(position: OverlayPosition): string {\n  return position.toLowerCase().replace('-', '-');\n}\n\n/**\n * Validate product tag position\n * Ensures x and y are within 0-100 range\n * @param tag - Product tag to validate\n * @returns Validated product tag\n */\nexport function validateTagPosition(tag: ProductTag): ProductTag {\n  return {\n    ...tag,\n    x: Math.max(0, Math.min(100, tag.x)),\n    y: Math.max(0, Math.min(100, tag.y)),\n  };\n}\n"
}

ðŸ”§ Tool: TodoWrite
Input: {
  "todos": [
    {
      "content": "Create lookbook type definitions in src/types/lookbook.ts",
      "status": "completed",
      "activeForm": "Creating lookbook type definitions"
    },
    {
      "content": "Create LookbookGrid component in src/components/LookbookGrid.astro",
      "status": "in_progress",
      "activeForm": "Creating LookbookGrid component"
    },
    {
      "content": "Create demo page for lookbook grid at src/pages/demo/lookbook-grid.astro",
      "status": "pending",
      "activeForm": "Creating demo page"
    }
  ]
}
Now let me create the main LookbookGrid component:

ðŸ”§ Tool: Write
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\components\\LookbookGrid.astro",
  "content": "---\n/**\n * LookbookGrid Component\n * A lookbook-style grid component with mixed aspect ratios, text overlays,\n * and shoppable product tags. Perfect for curated seasonal collections or\n * style guides.\n *\n * Features:\n * - Mixed aspect ratios for editorial layouts\n * - Text overlays with flexible positioning\n * - Shoppable product tags with hover tooltips\n * - Responsive grid layouts (2-4 columns)\n * - Stagger animation support\n * - Full accessibility support (WCAG 2.1 AA)\n * - Reduced motion support\n * - Dark mode support\n *\n * @example Basic usage\n * ```astro\n * <LookbookGrid\n *   items={lookbookItems}\n *   columns={3}\n *   heading=\"Spring Collection\"\n * />\n * ```\n *\n * @example With product tags and tooltips\n * ```astro\n * <LookbookGrid\n *   items={lookbookItems}\n *   columns={3}\n *   layout=\"editorial\"\n *   enableTooltips={true}\n *   showTagsByDefault={false}\n * />\n * ```\n */\n\nimport type {\n  LookbookGridProps,\n  LookbookItem,\n  ProductTag,\n  LookbookLayout,\n} from '../types/lookbook';\nimport { getLookbookAspectRatioCss, validateTagPosition } from '../types/lookbook';\nimport { formatPrice } from '../types/product';\nimport {\n  appendUTMParams,\n  mergeUTMParams,\n  getShopLinkAttributes,\n} from '../utils/shop-tracking';\nimport { shopConfig } from '../config/shop.config';\n\ninterface Props extends LookbookGridProps {}\n\nconst {\n  items = [],\n  columns = 3,\n  gap = 'medium',\n  layout = 'standard',\n  heading,\n  subheading,\n  id = 'lookbook-grid',\n  class: className = '',\n  enableAnimation = true,\n  maxStaggerItems = 12,\n  showTagsByDefault = false,\n  enableTooltips = true,\n  responsiveColumns,\n} = Astro.props;\n\n// Build CSS classes\nconst sectionClasses = [\n  'lookbook-grid',\n  `lookbook-grid--cols-${columns}`,\n  `lookbook-grid--gap-${gap}`,\n  `lookbook-grid--layout-${layout}`,\n  enableAnimation && 'lookbook-grid--animated',\n  showTagsByDefault && 'lookbook-grid--tags-visible',\n  className,\n].filter(Boolean).join(' ');\n\n// Gap values mapping\nconst gapValues: Record<string, string> = {\n  none: '0',\n  small: 'var(--spacing-2)',\n  medium: 'var(--spacing-4)',\n  large: 'var(--spacing-6)',\n};\n\n// Build responsive column CSS custom properties\nconst responsiveColsStyle = responsiveColumns\n  ? `--grid-cols-mobile: ${responsiveColumns.mobile || 1}; --grid-cols-tablet: ${responsiveColumns.tablet || 2}; --grid-cols-desktop: ${responsiveColumns.desktop || columns};`\n  : '';\n\n// Helper function to get item style for grid placement\nfunction getItemStyle(item: LookbookItem, index: number): string {\n  const styles: string[] = [];\n\n  // Apply stagger animation delay\n  if (enableAnimation) {\n    const staggerIndex = Math.min(index, maxStaggerItems - 1);\n    styles.push(`--stagger-delay: ${staggerIndex * 80}ms`);\n  }\n\n  // Apply item size/span\n  if (item.size?.colSpan && item.size.colSpan > 1) {\n    styles.push(`grid-column: span ${item.size.colSpan}`);\n  }\n  if (item.size?.rowSpan && item.size.rowSpan > 1) {\n    styles.push(`grid-row: span ${item.size.rowSpan}`);\n  }\n\n  // Apply aspect ratio\n  const aspectRatio = getLookbookAspectRatioCss(item.aspectRatio || '4:5');\n  styles.push(`--item-aspect-ratio: ${aspectRatio}`);\n\n  return styles.join('; ');\n}\n\n// Helper function to build tracked URL\nfunction getTrackedUrl(href: string, utmParams?: any, itemId?: string): string {\n  if (!href) return '#';\n  const mergedParams = mergeUTMParams({\n    ...utmParams,\n    content: utmParams?.content || `lookbook_item_${itemId}`,\n  });\n  return shopConfig.trackingEnabled\n    ? appendUTMParams(href, mergedParams)\n    : href;\n}\n\n// Helper function to get product tag tooltip content\nfunction getTagTooltipId(itemId: string, tagId: string): string {\n  return `tooltip-${itemId}-${tagId}`;\n}\n\n// Check if we have items to display\nconst hasItems = items && items.length > 0;\n---\n\n<section\n  class={sectionClasses}\n  id={id}\n  aria-labelledby={heading ? `${id}-heading` : undefined}\n  style={`--grid-cols: ${columns}; --grid-gap: ${gapValues[gap]}; ${responsiveColsStyle}`}\n  data-layout={layout}\n  data-enable-tooltips={enableTooltips}\n>\n  <div class=\"lookbook-grid__container\">\n    <!-- Section Header -->\n    {(heading || subheading) && (\n      <header class=\"lookbook-grid__header\">\n        {heading && (\n          <h2 id={`${id}-heading`} class=\"lookbook-grid__heading\">{heading}</h2>\n        )}\n        {subheading && (\n          <p class=\"lookbook-grid__subheading\">{subheading}</p>\n        )}\n      </header>\n    )}\n\n    <!-- Lookbook Grid -->\n    {hasItems ? (\n      <div\n        class=\"lookbook-grid__grid\"\n        role=\"list\"\n        aria-label=\"Lookbook collection\"\n      >\n        {items.map((item, index) => {\n          const itemClasses = [\n            'lookbook-grid__item',\n            item.featured && 'lookbook-grid__item--featured',\n            item.textOverlay && 'lookbook-grid__item--has-overlay',\n            item.productTags?.length && 'lookbook-grid__item--has-tags',\n            enableAnimation && 'lookbook-grid__item--animated',\n            item.class,\n          ].filter(Boolean).join(' ');\n\n          const itemStyle = getItemStyle(item, index);\n          const linkAttrs = getShopLinkAttributes(item.openInNewTab);\n          const trackedHref = item.href ? getTrackedUrl(item.href, item.utmParams, item.id) : null;\n\n          return (\n            <article\n              class={itemClasses}\n              role=\"listitem\"\n              style={itemStyle}\n              data-item-id={item.id}\n              data-index={index}\n            >\n              {/* Item container - either link or div */}\n              {trackedHref ? (\n                <a\n                  href={trackedHref}\n                  class=\"lookbook-grid__item-link\"\n                  aria-label={item.textOverlay?.heading || `View lookbook item ${index + 1}`}\n                  data-lookbook-link\n                  {...linkAttrs}\n                >\n                  <div class=\"lookbook-grid__item-inner\">\n                    <!-- Image -->\n                    <div class=\"lookbook-grid__image-container\">\n                      <picture>\n                        {item.image.srcWebP && (\n                          <source srcset={item.image.srcWebP} type=\"image/webp\" />\n                        )}\n                        <img\n                          src={item.image.src}\n                          alt={item.alt || item.image.alt}\n                          width={item.image.width || 600}\n                          height={item.image.height || 750}\n                          loading={index < 4 ? 'eager' : 'lazy'}\n                          decoding=\"async\"\n                          class=\"lookbook-grid__image\"\n                          onload=\"this.closest('.lookbook-grid__image-container').classList.add('lookbook-grid__image-container--loaded')\"\n                        />\n                      </picture>\n\n                      {/* Loading placeholder */}\n                      <div class=\"lookbook-grid__image-placeholder\" aria-hidden=\"true\">\n                        <div class=\"lookbook-grid__shimmer\"></div>\n                      </div>\n                    </div>\n\n                    <!-- Badges -->\n                    {(item.isNew || item.featured || item.category) && (\n                      <div class=\"lookbook-grid__badges\">\n                        {item.isNew && (\n                          <span class=\"lookbook-grid__badge lookbook-grid__badge--new\">New</span>\n                        )}\n                        {item.featured && !item.isNew && (\n                          <span class=\"lookbook-grid__badge lookbook-grid__badge--featured\">Featured</span>\n                        )}\n                        {item.category && (\n                          <span class=\"lookbook-grid__badge lookbook-grid__badge--category\">{item.category}</span>\n                        )}\n                      </div>\n                    )}\n\n                    <!-- Text Overlay -->\n                    {item.textOverlay && (\n                      <div\n                        class={`lookbook-grid__overlay lookbook-grid__overlay--${item.textOverlay.position || 'bottom-left'} lookbook-grid__overlay--${item.textOverlay.theme || 'dark'}`}\n                        style={`text-align: ${item.textOverlay.alignment || 'left'};`}\n                      >\n                        <div class=\"lookbook-grid__overlay-content\">\n                          {item.textOverlay.heading && (\n                            <h3 class=\"lookbook-grid__overlay-heading\">{item.textOverlay.heading}</h3>\n                          )}\n                          {item.textOverlay.subheading && (\n                            <p class=\"lookbook-grid__overlay-subheading\">{item.textOverlay.subheading}</p>\n                          )}\n                          {item.textOverlay.ctaText && (\n                            <span class=\"lookbook-grid__overlay-cta\">\n                              <span class=\"lookbook-grid__overlay-cta-text\">{item.textOverlay.ctaText}</span>\n                              <svg\n                                class=\"lookbook-grid__overlay-cta-icon\"\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                viewBox=\"0 0 24 24\"\n                                fill=\"none\"\n                                stroke=\"currentColor\"\n                                stroke-width=\"2\"\n                                stroke-linecap=\"round\"\n                                stroke-linejoin=\"round\"\n                                aria-hidden=\"true\"\n                              >\n                                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                                <polyline points=\"12 5 19 12 12 19\"></polyline>\n                              </svg>\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </a>\n              ) : (\n                <div class=\"lookbook-grid__item-inner\">\n                  <!-- Image -->\n                  <div class=\"lookbook-grid__image-container\">\n                    <picture>\n                      {item.image.srcWebP && (\n                        <source srcset={item.image.srcWebP} type=\"image/webp\" />\n                      )}\n                      <img\n                        src={item.image.src}\n                        alt={item.alt || item.image.alt}\n                        width={item.image.width || 600}\n                        height={item.image.height || 750}\n                        loading={index < 4 ? 'eager' : 'lazy'}\n                        decoding=\"async\"\n                        class=\"lookbook-grid__image\"\n                        onload=\"this.closest('.lookbook-grid__image-container').classList.add('lookbook-grid__image-container--loaded')\"\n                      />\n                    </picture>\n\n                    {/* Loading placeholder */}\n                    <div class=\"lookbook-grid__image-placeholder\" aria-hidden=\"true\">\n                      <div class=\"lookbook-grid__shimmer\"></div>\n                    </div>\n                  </div>\n\n                  <!-- Badges -->\n                  {(item.isNew || item.featured || item.category) && (\n                    <div class=\"lookbook-grid__badges\">\n                      {item.isNew && (\n                        <span class=\"lookbook-grid__badge lookbook-grid__badge--new\">New</span>\n                      )}\n                      {item.featured && !item.isNew && (\n                        <span class=\"lookbook-grid__badge lookbook-grid__badge--featured\">Featured</span>\n                      )}\n                      {item.category && (\n                        <span class=\"lookbook-grid__badge lookbook-grid__badge--category\">{item.category}</span>\n                      )}\n                    </div>\n                  )}\n\n                  <!-- Text Overlay -->\n                  {item.textOverlay && (\n                    <div\n                      class={`lookbook-grid__overlay lookbook-grid__overlay--${item.textOverlay.position || 'bottom-left'} lookbook-grid__overlay--${item.textOverlay.theme || 'dark'}`}\n                      style={`text-align: ${item.textOverlay.alignment || 'left'};`}\n                    >\n                      <div class=\"lookbook-grid__overlay-content\">\n                        {item.textOverlay.heading && (\n                          <h3 class=\"lookbook-grid__overlay-heading\">{item.textOverlay.heading}</h3>\n                        )}\n                        {item.textOverlay.subheading && (\n                          <p class=\"lookbook-grid__overlay-subheading\">{item.textOverlay.subheading}</p>\n                        )}\n                        {item.textOverlay.ctaText && (\n                          <span class=\"lookbook-grid__overlay-cta\">\n                            <span class=\"lookbook-grid__overlay-cta-text\">{item.textOverlay.ctaText}</span>\n                            <svg\n                              class=\"lookbook-grid__overlay-cta-icon\"\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                              viewBox=\"0 0 24 24\"\n                              fill=\"none\"\n                              stroke=\"currentColor\"\n                              stroke-width=\"2\"\n                              stroke-linecap=\"round\"\n                              stroke-linejoin=\"round\"\n                              aria-hidden=\"true\"\n                            >\n                              <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                              <polyline points=\"12 5 19 12 12 19\"></polyline>\n                            </svg>\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Product Tags */}\n              {item.productTags && item.productTags.length > 0 && (\n                <div class=\"lookbook-grid__tags\" aria-label=\"Shop this look\">\n                  {item.productTags.map((tag) => {\n                    const validatedTag = validateTagPosition(tag);\n                    const tagLinkAttrs = getShopLinkAttributes(tag.openInNewTab);\n                    const tagHref = getTrackedUrl(tag.shopUrl, tag.utmParams, tag.id);\n                    const tooltipId = getTagTooltipId(item.id, tag.id);\n\n                    return (\n                      <div\n                        class=\"lookbook-grid__tag\"\n                        style={`left: ${validatedTag.x}%; top: ${validatedTag.y}%;`}\n                        data-tag-id={tag.id}\n                      >\n                        {/* Tag hotspot button */}\n                        <button\n                          class=\"lookbook-grid__tag-hotspot\"\n                          aria-label={`Shop ${tag.name} - ${formatPrice(tag.price)}`}\n                          aria-describedby={enableTooltips ? tooltipId : undefined}\n                          data-tag-trigger\n                        >\n                          <span class=\"lookbook-grid__tag-hotspot-inner\">\n                            <svg\n                              class=\"lookbook-grid__tag-hotspot-icon\"\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                              viewBox=\"0 0 24 24\"\n                              fill=\"none\"\n                              stroke=\"currentColor\"\n                              stroke-width=\"2\"\n                              stroke-linecap=\"round\"\n                              stroke-linejoin=\"round\"\n                              aria-hidden=\"true\"\n                            >\n                              <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\n                              <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                            </svg>\n                          </span>\n                          <span class=\"lookbook-grid__tag-hotspot-pulse\"></span>\n                        </button>\n\n                        {/* Tag tooltip/card */}\n                        {enableTooltips && (\n                          <div\n                            class=\"lookbook-grid__tag-tooltip\"\n                            id={tooltipId}\n                            role=\"tooltip\"\n                          >\n                            {tag.image && (\n                              <div class=\"lookbook-grid__tag-tooltip-image\">\n                                <img\n                                  src={tag.image.src}\n                                  alt={tag.image.alt}\n                                  width=\"80\"\n                                  height=\"100\"\n                                  loading=\"lazy\"\n                                />\n                              </div>\n                            )}\n                            <div class=\"lookbook-grid__tag-tooltip-content\">\n                              <span class=\"lookbook-grid__tag-tooltip-name\">{tag.name}</span>\n                              <span class=\"lookbook-grid__tag-tooltip-price\">{formatPrice(tag.price)}</span>\n                              {tag.description && (\n                                <span class=\"lookbook-grid__tag-tooltip-description\">{tag.description}</span>\n                              )}\n                              <a\n                                href={tagHref}\n                                class=\"lookbook-grid__tag-tooltip-link\"\n                                data-product-link\n                                {...tagLinkAttrs}\n                              >\n                                Shop Now\n                                <svg\n                                  class=\"lookbook-grid__tag-tooltip-link-icon\"\n                                  xmlns=\"http://www.w3.org/2000/svg\"\n                                  viewBox=\"0 0 24 24\"\n                                  fill=\"none\"\n                                  stroke=\"currentColor\"\n                                  stroke-width=\"2\"\n                                  stroke-linecap=\"round\"\n                                  stroke-linejoin=\"round\"\n                                  aria-hidden=\"true\"\n                                >\n                                  <path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"></path>\n                                  <polyline points=\"15 3 21 3 21 9\"></polyline>\n                                  <line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"></line>\n                                </svg>\n                              </a>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </article>\n          );\n        })}\n      </div>\n    ) : (\n      <!-- Empty State -->\n      <div class=\"lookbook-grid__empty\" role=\"status\" aria-live=\"polite\">\n        <div class=\"lookbook-grid__empty-icon\" aria-hidden=\"true\">\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" stroke=\"currentColor\" stroke-width=\"2\"/>\n            <path d=\"M3 14L7 10L10 13L17 6L21 10\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <circle cx=\"8\" cy=\"8\" r=\"1.5\" fill=\"currentColor\"/>\n          </svg>\n        </div>\n        <p class=\"lookbook-grid__empty-text\">No lookbook items to display.</p>\n      </div>\n    )}\n  </div>\n</section>\n\n<style>\n  /* =================================================================\n   * LOOKBOOK GRID COMPONENT STYLES\n   * =================================================================\n   * Uses design system variables from variables.css\n   * Follows BEM naming convention for maintainability\n   */\n\n  .lookbook-grid {\n    padding: var(--spacing-8) var(--spacing-4);\n  }\n\n  .lookbook-grid__container {\n    max-width: var(--container-7xl);\n    margin: 0 auto;\n  }\n\n  /* =================================================================\n   * SECTION HEADER\n   * ================================================================= */\n  .lookbook-grid__header {\n    text-align: center;\n    margin-bottom: var(--spacing-10);\n  }\n\n  .lookbook-grid__heading {\n    font-family: var(--font-editorial-heading, var(--font-heading));\n    font-size: var(--font-size-3xl);\n    font-weight: var(--font-weight-bold);\n    color: var(--color-text-primary);\n    margin: 0 0 var(--spacing-3);\n    line-height: var(--line-height-tight);\n    letter-spacing: var(--letter-spacing-editorial-heading, var(--letter-spacing-tight));\n  }\n\n  .lookbook-grid__subheading {\n    font-family: var(--font-body);\n    font-size: var(--font-size-lg);\n    color: var(--color-text-secondary);\n    margin: 0;\n    max-width: 42rem;\n    margin-left: auto;\n    margin-right: auto;\n    line-height: var(--line-height-relaxed);\n  }\n\n  /* =================================================================\n   * LOOKBOOK GRID - Base Styles\n   * ================================================================= */\n  .lookbook-grid__grid {\n    display: grid;\n    grid-template-columns: repeat(var(--grid-cols, 3), 1fr);\n    gap: var(--grid-gap, var(--spacing-4));\n    grid-auto-flow: dense;\n  }\n\n  .lookbook-grid__item {\n    position: relative;\n    min-width: 0;\n    border-radius: var(--radius-lg);\n    overflow: hidden;\n    background-color: var(--color-background-muted);\n  }\n\n  .lookbook-grid__item-link {\n    display: block;\n    text-decoration: none;\n    color: inherit;\n  }\n\n  .lookbook-grid__item-link:focus-visible {\n    outline: none;\n  }\n\n  .lookbook-grid__item-link:focus-visible .lookbook-grid__item-inner {\n    outline: 2px solid var(--focus-ring-color);\n    outline-offset: 2px;\n  }\n\n  .lookbook-grid__item-inner {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    border-radius: var(--radius-lg);\n    overflow: hidden;\n  }\n\n  /* =================================================================\n   * IMAGE CONTAINER\n   * ================================================================= */\n  .lookbook-grid__image-container {\n    position: relative;\n    aspect-ratio: var(--item-aspect-ratio, 4 / 5);\n    overflow: hidden;\n  }\n\n  .lookbook-grid__image {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    object-position: center;\n    transition: transform var(--duration-500) var(--ease-out);\n  }\n\n  .lookbook-grid__item:hover .lookbook-grid__image {\n    transform: scale(1.05);\n  }\n\n  /* Loading placeholder */\n  .lookbook-grid__image-placeholder {\n    position: absolute;\n    inset: 0;\n    z-index: 1;\n    transition: opacity var(--duration-300) var(--ease-out);\n  }\n\n  .lookbook-grid__image-container--loaded .lookbook-grid__image-placeholder {\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  .lookbook-grid__shimmer {\n    position: absolute;\n    inset: 0;\n    background: linear-gradient(\n      90deg,\n      var(--color-background-muted) 0%,\n      var(--color-background-subtle) 50%,\n      var(--color-background-muted) 100%\n    );\n    background-size: 200% 100%;\n    animation: lookbook-shimmer 1.5s ease-in-out infinite;\n  }\n\n  @keyframes lookbook-shimmer {\n    0% {\n      background-position: 200% 0;\n    }\n    100% {\n      background-position: -200% 0;\n    }\n  }\n\n  /* =================================================================\n   * BADGES\n   * ================================================================= */\n  .lookbook-grid__badges {\n    position: absolute;\n    top: var(--spacing-3);\n    left: var(--spacing-3);\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-2);\n    z-index: 10;\n  }\n\n  .lookbook-grid__badge {\n    display: inline-block;\n    padding: var(--spacing-1) var(--spacing-2-5);\n    font-family: var(--font-body);\n    font-size: var(--font-size-xs);\n    font-weight: var(--font-weight-semibold);\n    text-transform: uppercase;\n    letter-spacing: var(--letter-spacing-wider);\n    border-radius: var(--radius-sm);\n  }\n\n  .lookbook-grid__badge--new {\n    background-color: var(--color-primary);\n    color: var(--color-text-inverse);\n  }\n\n  .lookbook-grid__badge--featured {\n    background-color: var(--color-accent);\n    color: var(--color-text-inverse);\n  }\n\n  .lookbook-grid__badge--category {\n    background-color: rgba(255, 255, 255, 0.9);\n    color: var(--color-text-primary);\n    backdrop-filter: blur(4px);\n  }\n\n  /* =================================================================\n   * TEXT OVERLAY\n   * ================================================================= */\n  .lookbook-grid__overlay {\n    position: absolute;\n    inset: 0;\n    display: flex;\n    padding: var(--spacing-5);\n    z-index: 5;\n    pointer-events: none;\n  }\n\n  .lookbook-grid__overlay-content {\n    pointer-events: auto;\n    max-width: 85%;\n  }\n\n  /* Overlay positions */\n  .lookbook-grid__overlay--top-left {\n    align-items: flex-start;\n    justify-content: flex-start;\n  }\n\n  .lookbook-grid__overlay--top-center {\n    align-items: flex-start;\n    justify-content: center;\n  }\n\n  .lookbook-grid__overlay--top-right {\n    align-items: flex-start;\n    justify-content: flex-end;\n  }\n\n  .lookbook-grid__overlay--center-left {\n    align-items: center;\n    justify-content: flex-start;\n  }\n\n  .lookbook-grid__overlay--center {\n    align-items: center;\n    justify-content: center;\n  }\n\n  .lookbook-grid__overlay--center-right {\n    align-items: center;\n    justify-content: flex-end;\n  }\n\n  .lookbook-grid__overlay--bottom-left {\n    align-items: flex-end;\n    justify-content: flex-start;\n  }\n\n  .lookbook-grid__overlay--bottom-center {\n    align-items: flex-end;\n    justify-content: center;\n  }\n\n  .lookbook-grid__overlay--bottom-right {\n    align-items: flex-end;\n    justify-content: flex-end;\n  }\n\n  /* Overlay themes */\n  .lookbook-grid__overlay--dark {\n    background: linear-gradient(\n      to top,\n      rgba(0, 0, 0, 0.7) 0%,\n      rgba(0, 0, 0, 0.3) 50%,\n      transparent 100%\n    );\n  }\n\n  .lookbook-grid__overlay--dark .lookbook-grid__overlay-heading,\n  .lookbook-grid__overlay--dark .lookbook-grid__overlay-subheading,\n  .lookbook-grid__overlay--dark .lookbook-grid__overlay-cta {\n    color: #ffffff;\n    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  }\n\n  .lookbook-grid__overlay--light {\n    background: linear-gradient(\n      to top,\n      rgba(255, 255, 255, 0.9) 0%,\n      rgba(255, 255, 255, 0.5) 50%,\n      transparent 100%\n    );\n  }\n\n  .lookbook-grid__overlay--light .lookbook-grid__overlay-heading,\n  .lookbook-grid__overlay--light .lookbook-grid__overlay-subheading,\n  .lookbook-grid__overlay--light .lookbook-grid__overlay-cta {\n    color: var(--color-text-primary);\n  }\n\n  .lookbook-grid__overlay--gradient {\n    background: linear-gradient(\n      135deg,\n      rgba(54, 83, 149, 0.8) 0%,\n      rgba(139, 92, 246, 0.6) 100%\n    );\n  }\n\n  .lookbook-grid__overlay--gradient .lookbook-grid__overlay-heading,\n  .lookbook-grid__overlay--gradient .lookbook-grid__overlay-subheading,\n  .lookbook-grid__overlay--gradient .lookbook-grid__overlay-cta {\n    color: #ffffff;\n  }\n\n  /* Top-positioned overlays get different gradient */\n  .lookbook-grid__overlay--top-left.lookbook-grid__overlay--dark,\n  .lookbook-grid__overlay--top-center.lookbook-grid__overlay--dark,\n  .lookbook-grid__overlay--top-right.lookbook-grid__overlay--dark {\n    background: linear-gradient(\n      to bottom,\n      rgba(0, 0, 0, 0.7) 0%,\n      rgba(0, 0, 0, 0.3) 50%,\n      transparent 100%\n    );\n  }\n\n  .lookbook-grid__overlay--top-left.lookbook-grid__overlay--light,\n  .lookbook-grid__overlay--top-center.lookbook-grid__overlay--light,\n  .lookbook-grid__overlay--top-right.lookbook-grid__overlay--light {\n    background: linear-gradient(\n      to bottom,\n      rgba(255, 255, 255, 0.9) 0%,\n      rgba(255, 255, 255, 0.5) 50%,\n      transparent 100%\n    );\n  }\n\n  .lookbook-grid__overlay-heading {\n    margin: 0 0 var(--spacing-1);\n    font-family: var(--font-editorial-heading, var(--font-heading));\n    font-size: var(--font-size-xl);\n    font-weight: var(--font-weight-bold);\n    line-height: var(--line-height-tight);\n    transition: transform var(--duration-200) var(--ease-out);\n  }\n\n  .lookbook-grid__item:hover .lookbook-grid__overlay-heading {\n    transform: translateY(-2px);\n  }\n\n  .lookbook-grid__overlay-subheading {\n    margin: 0 0 var(--spacing-3);\n    font-family: var(--font-body);\n    font-size: var(--font-size-sm);\n    line-height: var(--line-height-relaxed);\n    opacity: 0.9;\n  }\n\n  .lookbook-grid__overlay-cta {\n    display: inline-flex;\n    align-items: center;\n    gap: var(--spacing-2);\n    font-family: var(--font-body);\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-semibold);\n    letter-spacing: var(--letter-spacing-wide);\n    text-transform: uppercase;\n    opacity: 0;\n    transform: translateY(10px);\n    transition:\n      opacity var(--duration-300) var(--ease-out),\n      transform var(--duration-300) var(--ease-spring-soft);\n  }\n\n  .lookbook-grid__item:hover .lookbook-grid__overlay-cta {\n    opacity: 1;\n    transform: translateY(0);\n  }\n\n  .lookbook-grid__overlay-cta-icon {\n    width: 1.25em;\n    height: 1.25em;\n    transition: transform var(--duration-200) var(--ease-out);\n  }\n\n  .lookbook-grid__item:hover .lookbook-grid__overlay-cta-icon {\n    transform: translateX(4px);\n  }\n\n  /* =================================================================\n   * PRODUCT TAGS\n   * ================================================================= */\n  .lookbook-grid__tags {\n    position: absolute;\n    inset: 0;\n    z-index: 15;\n    pointer-events: none;\n  }\n\n  .lookbook-grid__tag {\n    position: absolute;\n    transform: translate(-50%, -50%);\n    pointer-events: auto;\n  }\n\n  .lookbook-grid__tag-hotspot {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 32px;\n    height: 32px;\n    padding: 0;\n    border: none;\n    border-radius: var(--radius-full);\n    background-color: rgba(255, 255, 255, 0.95);\n    box-shadow: var(--shadow-md);\n    cursor: pointer;\n    transition:\n      transform var(--duration-200) var(--ease-out),\n      background-color var(--duration-150) var(--ease-in-out);\n\n    /* Hide by default, show on hover */\n    opacity: 0;\n    transform: scale(0.8);\n  }\n\n  .lookbook-grid__item:hover .lookbook-grid__tag-hotspot,\n  .lookbook-grid--tags-visible .lookbook-grid__tag-hotspot {\n    opacity: 1;\n    transform: scale(1);\n  }\n\n  .lookbook-grid__tag-hotspot:hover {\n    background-color: var(--color-primary);\n    transform: scale(1.1);\n  }\n\n  .lookbook-grid__tag-hotspot:focus-visible {\n    outline: none;\n    box-shadow: var(--shadow-md), var(--focus-ring);\n  }\n\n  .lookbook-grid__tag-hotspot-inner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    color: var(--color-text-primary);\n    transition: color var(--duration-150) var(--ease-in-out);\n  }\n\n  .lookbook-grid__tag-hotspot:hover .lookbook-grid__tag-hotspot-inner {\n    color: var(--color-text-inverse);\n  }\n\n  .lookbook-grid__tag-hotspot-icon {\n    width: 14px;\n    height: 14px;\n  }\n\n  .lookbook-grid__tag-hotspot-pulse {\n    position: absolute;\n    inset: 0;\n    border-radius: var(--radius-full);\n    background-color: rgba(255, 255, 255, 0.6);\n    animation: tag-pulse 2s ease-in-out infinite;\n    pointer-events: none;\n  }\n\n  @keyframes tag-pulse {\n    0%, 100% {\n      transform: scale(1);\n      opacity: 0.6;\n    }\n    50% {\n      transform: scale(1.4);\n      opacity: 0;\n    }\n  }\n\n  /* Tag tooltip */\n  .lookbook-grid__tag-tooltip {\n    position: absolute;\n    left: 50%;\n    bottom: calc(100% + var(--spacing-2));\n    transform: translateX(-50%) translateY(10px);\n    min-width: 180px;\n    max-width: 240px;\n    padding: var(--spacing-3);\n    background-color: var(--color-background-elevated);\n    border-radius: var(--radius-lg);\n    box-shadow: var(--shadow-xl);\n    opacity: 0;\n    visibility: hidden;\n    transition:\n      opacity var(--duration-200) var(--ease-out),\n      transform var(--duration-200) var(--ease-spring-soft),\n      visibility var(--duration-200);\n    z-index: 20;\n  }\n\n  .lookbook-grid__tag-hotspot:hover + .lookbook-grid__tag-tooltip,\n  .lookbook-grid__tag-hotspot:focus + .lookbook-grid__tag-tooltip,\n  .lookbook-grid__tag-tooltip:hover {\n    opacity: 1;\n    visibility: visible;\n    transform: translateX(-50%) translateY(0);\n  }\n\n  /* Tooltip arrow */\n  .lookbook-grid__tag-tooltip::after {\n    content: '';\n    position: absolute;\n    left: 50%;\n    top: 100%;\n    transform: translateX(-50%);\n    border: 8px solid transparent;\n    border-top-color: var(--color-background-elevated);\n  }\n\n  .lookbook-grid__tag-tooltip-image {\n    margin-bottom: var(--spacing-2);\n    border-radius: var(--radius-md);\n    overflow: hidden;\n  }\n\n  .lookbook-grid__tag-tooltip-image img {\n    width: 100%;\n    height: auto;\n    object-fit: cover;\n  }\n\n  .lookbook-grid__tag-tooltip-content {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-1);\n  }\n\n  .lookbook-grid__tag-tooltip-name {\n    font-family: var(--font-heading);\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-semibold);\n    color: var(--color-text-primary);\n    line-height: var(--line-height-snug);\n  }\n\n  .lookbook-grid__tag-tooltip-price {\n    font-family: var(--font-body);\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-semibold);\n    color: var(--color-primary);\n  }\n\n  .lookbook-grid__tag-tooltip-description {\n    font-family: var(--font-body);\n    font-size: var(--font-size-xs);\n    color: var(--color-text-secondary);\n    line-height: var(--line-height-relaxed);\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n  }\n\n  .lookbook-grid__tag-tooltip-link {\n    display: inline-flex;\n    align-items: center;\n    gap: var(--spacing-1);\n    margin-top: var(--spacing-2);\n    padding: var(--spacing-1-5) var(--spacing-2-5);\n    font-family: var(--font-body);\n    font-size: var(--font-size-xs);\n    font-weight: var(--font-weight-semibold);\n    color: var(--color-text-inverse);\n    background-color: var(--color-primary);\n    border-radius: var(--radius-md);\n    text-decoration: none;\n    transition:\n      background-color var(--duration-150) var(--ease-in-out),\n      transform var(--duration-150) var(--ease-out);\n  }\n\n  .lookbook-grid__tag-tooltip-link:hover {\n    background-color: var(--color-primary-hover);\n    transform: translateY(-1px);\n  }\n\n  .lookbook-grid__tag-tooltip-link:focus-visible {\n    outline: none;\n    box-shadow: var(--focus-ring);\n  }\n\n  .lookbook-grid__tag-tooltip-link-icon {\n    width: 12px;\n    height: 12px;\n  }\n\n  /* =================================================================\n   * LAYOUT VARIANTS\n   * ================================================================= */\n\n  /* Editorial layout - mixed sizes for magazine feel */\n  .lookbook-grid--layout-editorial .lookbook-grid__item:nth-child(5n+1) {\n    grid-column: span 2;\n  }\n\n  .lookbook-grid--layout-editorial .lookbook-grid__item:nth-child(5n+1) .lookbook-grid__overlay-heading {\n    font-size: var(--font-size-2xl);\n  }\n\n  /* Featured first layout */\n  .lookbook-grid--layout-featured-first .lookbook-grid__item:first-child {\n    grid-column: span 2;\n    grid-row: span 2;\n  }\n\n  .lookbook-grid--layout-featured-first .lookbook-grid__item:first-child .lookbook-grid__overlay-heading {\n    font-size: var(--font-size-3xl);\n  }\n\n  /* Masonry layout */\n  .lookbook-grid--layout-masonry .lookbook-grid__grid {\n    grid-template-rows: masonry;\n    align-items: start;\n  }\n\n  @supports not (grid-template-rows: masonry) {\n    .lookbook-grid--layout-masonry .lookbook-grid__item:nth-child(3n+2) .lookbook-grid__image-container {\n      aspect-ratio: 1 / 1;\n    }\n\n    .lookbook-grid--layout-masonry .lookbook-grid__item:nth-child(3n) .lookbook-grid__image-container {\n      aspect-ratio: 3 / 4;\n    }\n  }\n\n  /* Gallery layout - minimal gaps, square images */\n  .lookbook-grid--layout-gallery .lookbook-grid__grid {\n    gap: var(--spacing-1);\n  }\n\n  .lookbook-grid--layout-gallery .lookbook-grid__item {\n    border-radius: 0;\n  }\n\n  .lookbook-grid--layout-gallery .lookbook-grid__image-container {\n    aspect-ratio: 1 / 1;\n  }\n\n  /* =================================================================\n   * ANIMATION STYLES\n   * ================================================================= */\n  .lookbook-grid__item--animated {\n    opacity: 0;\n    transform: translateY(30px);\n    transition:\n      opacity var(--duration-500) var(--ease-out),\n      transform var(--duration-500) var(--ease-out);\n    transition-delay: var(--stagger-delay, 0ms);\n  }\n\n  .lookbook-grid--animated .lookbook-grid__item--animated.lookbook-grid__item--visible {\n    opacity: 1;\n    transform: translateY(0);\n  }\n\n  /* Immediate visibility for non-animated grids */\n  .lookbook-grid:not(.lookbook-grid--animated) .lookbook-grid__item--animated {\n    opacity: 1;\n    transform: none;\n    transition: none;\n  }\n\n  /* =================================================================\n   * EMPTY STATE\n   * ================================================================= */\n  .lookbook-grid__empty {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: var(--spacing-4);\n    padding: var(--spacing-16) var(--spacing-8);\n    background-color: var(--color-background-muted);\n    border-radius: var(--radius-xl);\n    border: 2px dashed var(--color-border);\n  }\n\n  .lookbook-grid__empty-icon {\n    width: var(--spacing-16);\n    height: var(--spacing-16);\n    color: var(--color-text-tertiary);\n  }\n\n  .lookbook-grid__empty-icon svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  .lookbook-grid__empty-text {\n    font-family: var(--font-body);\n    font-size: var(--font-size-lg);\n    color: var(--color-text-tertiary);\n    margin: 0;\n    text-align: center;\n  }\n\n  /* =================================================================\n   * RESPONSIVE STYLES\n   * ================================================================= */\n\n  /* Large Desktop (1280px+) */\n  @media screen and (min-width: 1280px) {\n    .lookbook-grid {\n      padding: var(--spacing-12) var(--spacing-8);\n    }\n\n    .lookbook-grid__heading {\n      font-size: var(--font-size-4xl);\n    }\n\n    .lookbook-grid__overlay-heading {\n      font-size: var(--font-size-2xl);\n    }\n  }\n\n  /* Desktop (1024px - 1279px) */\n  @media screen and (min-width: 1024px) and (max-width: 1279px) {\n    .lookbook-grid__grid {\n      grid-template-columns: repeat(var(--grid-cols-desktop, var(--grid-cols, 3)), 1fr);\n    }\n  }\n\n  /* Tablet (768px - 1023px) */\n  @media screen and (min-width: 768px) and (max-width: 1023px) {\n    .lookbook-grid {\n      padding: var(--spacing-8) var(--spacing-6);\n    }\n\n    .lookbook-grid__grid {\n      grid-template-columns: repeat(var(--grid-cols-tablet, 2), 1fr);\n    }\n\n    .lookbook-grid__heading {\n      font-size: var(--font-size-3xl);\n    }\n\n    /* Adjust layout variants for tablet */\n    .lookbook-grid--layout-editorial .lookbook-grid__item:nth-child(5n+1),\n    .lookbook-grid--layout-featured-first .lookbook-grid__item:first-child {\n      grid-column: span 2;\n      grid-row: span 1;\n    }\n  }\n\n  /* Small Tablet / Large Mobile (480px - 767px) */\n  @media screen and (min-width: 480px) and (max-width: 767px) {\n    .lookbook-grid {\n      padding: var(--spacing-6) var(--spacing-4);\n    }\n\n    .lookbook-grid__grid {\n      grid-template-columns: repeat(var(--grid-cols-tablet, 2), 1fr);\n      gap: var(--spacing-3);\n    }\n\n    .lookbook-grid__heading {\n      font-size: var(--font-size-2xl);\n    }\n\n    .lookbook-grid__subheading {\n      font-size: var(--font-size-base);\n    }\n\n    /* Reset layout variants on smaller screens */\n    .lookbook-grid--layout-editorial .lookbook-grid__item:nth-child(5n+1),\n    .lookbook-grid--layout-featured-first .lookbook-grid__item:first-child {\n      grid-column: span 1;\n      grid-row: span 1;\n    }\n\n    .lookbook-grid__overlay {\n      padding: var(--spacing-3);\n    }\n\n    .lookbook-grid__overlay-heading {\n      font-size: var(--font-size-lg);\n    }\n  }\n\n  /* Mobile (< 480px) */\n  @media screen and (max-width: 479px) {\n    .lookbook-grid {\n      padding: var(--spacing-4) var(--spacing-3);\n    }\n\n    .lookbook-grid__header {\n      margin-bottom: var(--spacing-6);\n    }\n\n    .lookbook-grid__grid {\n      grid-template-columns: repeat(var(--grid-cols-mobile, 1), 1fr);\n      gap: var(--spacing-3);\n    }\n\n    .lookbook-grid__heading {\n      font-size: var(--font-size-xl);\n    }\n\n    .lookbook-grid__subheading {\n      font-size: var(--font-size-sm);\n    }\n\n    /* All items single column on mobile */\n    .lookbook-grid__item {\n      grid-column: span 1 !important;\n      grid-row: span 1 !important;\n    }\n\n    .lookbook-grid__overlay {\n      padding: var(--spacing-3);\n    }\n\n    .lookbook-grid__overlay-heading {\n      font-size: var(--font-size-base);\n    }\n\n    .lookbook-grid__overlay-subheading {\n      font-size: var(--font-size-xs);\n    }\n\n    /* Always show tags on mobile for touch */\n    .lookbook-grid__tag-hotspot {\n      opacity: 1;\n      transform: scale(1);\n    }\n\n    /* Show CTA on mobile for touch */\n    @media (hover: none) {\n      .lookbook-grid__overlay-cta {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    /* Adjust tooltip positioning for mobile */\n    .lookbook-grid__tag-tooltip {\n      position: fixed;\n      left: 50% !important;\n      bottom: var(--spacing-4) !important;\n      transform: translateX(-50%) !important;\n      max-width: calc(100vw - var(--spacing-8));\n      width: 280px;\n    }\n\n    .lookbook-grid__tag-tooltip::after {\n      display: none;\n    }\n  }\n\n  /* =================================================================\n   * REDUCED MOTION\n   * Respect user preferences for reduced motion\n   * ================================================================= */\n  @media (prefers-reduced-motion: reduce) {\n    .lookbook-grid__item--animated {\n      opacity: 1;\n      transform: none;\n      transition: none;\n    }\n\n    .lookbook-grid__image,\n    .lookbook-grid__overlay-heading,\n    .lookbook-grid__overlay-cta,\n    .lookbook-grid__overlay-cta-icon,\n    .lookbook-grid__tag-hotspot,\n    .lookbook-grid__tag-tooltip {\n      transition: none;\n    }\n\n    .lookbook-grid__item:hover .lookbook-grid__image {\n      transform: none;\n    }\n\n    .lookbook-grid__item:hover .lookbook-grid__overlay-heading {\n      transform: none;\n    }\n\n    .lookbook-grid__item:hover .lookbook-grid__overlay-cta-icon {\n      transform: none;\n    }\n\n    .lookbook-grid__overlay-cta {\n      opacity: 1;\n      transform: translateY(0);\n    }\n\n    .lookbook-grid__tag-hotspot-pulse {\n      animation: none;\n    }\n\n    .lookbook-grid__shimmer {\n      animation: none;\n    }\n  }\n\n  /* =================================================================\n   * DARK MODE\n   * ================================================================= */\n  :global(html[data-theme=\"dark\"]) .lookbook-grid {\n    background-color: var(--color-background);\n  }\n\n  :global(html[data-theme=\"dark\"]) .lookbook-grid__item {\n    background-color: var(--color-background-muted);\n  }\n\n  :global(html[data-theme=\"dark\"]) .lookbook-grid__empty {\n    background-color: var(--color-background-elevated);\n    border-color: var(--color-border-dark);\n  }\n\n  :global(html[data-theme=\"dark\"]) .lookbook-grid__badge--category {\n    background-color: rgba(30, 41, 59, 0.9);\n    color: var(--color-text-primary);\n  }\n\n  :global(html[data-theme=\"dark\"]) .lookbook-grid__tag-hotspot {\n    background-color: rgba(30, 41, 59, 0.95);\n  }\n\n  :global(html[data-theme=\"dark\"]) .lookbook-grid__tag-hotspot:hover {\n    background-color: var(--color-primary);\n  }\n\n  :global(html[data-theme=\"dark\"]) .lookbook-grid__tag-hotspot-inner {\n    color: var(--color-text-primary);\n  }\n\n  :global(html[data-theme=\"dark\"]) .lookbook-grid__tag-tooltip {\n    background-color: var(--color-background-elevated);\n  }\n\n  :global(html[data-theme=\"dark\"]) .lookbook-grid__tag-tooltip::after {\n    border-top-color: var(--color-background-elevated);\n  }\n\n  /* =================================================================\n   * HIGH CONTRAST MODE\n   * ================================================================= */\n  @media (forced-colors: active) {\n    .lookbook-grid__item {\n      border: 2px solid currentColor;\n    }\n\n    .lookbook-grid__empty {\n      border: 2px solid currentColor;\n    }\n\n    .lookbook-grid__badge {\n      border: 1px solid currentColor;\n    }\n\n    .lookbook-grid__overlay {\n      background: transparent;\n    }\n\n    .lookbook-grid__overlay-heading,\n    .lookbook-grid__overlay-subheading,\n    .lookbook-grid__overlay-cta {\n      color: CanvasText;\n      text-shadow: none;\n      background: Canvas;\n    }\n\n    .lookbook-grid__tag-hotspot {\n      border: 2px solid currentColor;\n    }\n\n    .lookbook-grid__tag-tooltip {\n      border: 2px solid currentColor;\n    }\n  }\n\n  /* =================================================================\n   * PRINT STYLES\n   * ================================================================= */\n  @media print {\n    .lookbook-grid {\n      padding: var(--spacing-4) 0;\n    }\n\n    .lookbook-grid__grid {\n      grid-template-columns: repeat(2, 1fr);\n      gap: var(--spacing-4);\n    }\n\n    .lookbook-grid__item {\n      break-inside: avoid;\n      page-break-inside: avoid;\n    }\n\n    .lookbook-grid__item--animated {\n      opacity: 1;\n      transform: none;\n    }\n\n    .lookbook-grid__overlay {\n      background: transparent;\n    }\n\n    .lookbook-grid__overlay-heading,\n    .lookbook-grid__overlay-subheading {\n      color: #000000;\n      text-shadow: none;\n    }\n\n    .lookbook-grid__overlay-cta {\n      display: none;\n    }\n\n    .lookbook-grid__tags {\n      display: none;\n    }\n\n    .lookbook-grid__image-placeholder {\n      display: none;\n    }\n  }\n</style>\n\n<script>\n  /**\n   * LookbookGrid Interactive Features\n   * - Intersection Observer for stagger animation reveal\n   * - Tag tooltip keyboard navigation\n   * - Analytics tracking for lookbook interactions\n   */\n  function initLookbookGrid() {\n    const grids = document.querySelectorAll('.lookbook-grid--animated');\n\n    grids.forEach((grid) => {\n      const items = grid.querySelectorAll('.lookbook-grid__item--animated');\n\n      // Use Intersection Observer for scroll-triggered animations\n      if ('IntersectionObserver' in window) {\n        const observer = new IntersectionObserver(\n          (entries) => {\n            entries.forEach((entry) => {\n              if (entry.isIntersecting) {\n                entry.target.classList.add('lookbook-grid__item--visible');\n                observer.unobserve(entry.target);\n              }\n            });\n          },\n          {\n            root: null,\n            rootMargin: '0px 0px -50px 0px',\n            threshold: 0.1,\n          }\n        );\n\n        items.forEach((item) => {\n          observer.observe(item);\n        });\n      } else {\n        // Fallback: show all items immediately\n        items.forEach((item) => {\n          item.classList.add('lookbook-grid__item--visible');\n        });\n      }\n    });\n\n    // Initialize tag interactions\n    initTagInteractions();\n\n    // Initialize analytics tracking\n    initLookbookTracking();\n  }\n\n  /**\n   * Initialize product tag interactions\n   */\n  function initTagInteractions() {\n    const tagTriggers = document.querySelectorAll('[data-tag-trigger]');\n\n    tagTriggers.forEach((trigger) => {\n      const tag = trigger.closest('.lookbook-grid__tag');\n      const tooltip = tag?.querySelector('.lookbook-grid__tag-tooltip');\n\n      if (!tooltip) return;\n\n      // Toggle tooltip on click (for touch devices)\n      trigger.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        // Close other open tooltips\n        document.querySelectorAll('.lookbook-grid__tag-tooltip--active').forEach((t) => {\n          if (t !== tooltip) {\n            t.classList.remove('lookbook-grid__tag-tooltip--active');\n          }\n        });\n\n        tooltip.classList.toggle('lookbook-grid__tag-tooltip--active');\n      });\n\n      // Keyboard navigation\n      trigger.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          tooltip.classList.toggle('lookbook-grid__tag-tooltip--active');\n        }\n        if (e.key === 'Escape') {\n          tooltip.classList.remove('lookbook-grid__tag-tooltip--active');\n        }\n      });\n    });\n\n    // Close tooltips when clicking outside\n    document.addEventListener('click', (e) => {\n      const target = e.target as Element;\n      if (!target.closest('.lookbook-grid__tag')) {\n        document.querySelectorAll('.lookbook-grid__tag-tooltip--active').forEach((t) => {\n          t.classList.remove('lookbook-grid__tag-tooltip--active');\n        });\n      }\n    });\n  }\n\n  /**\n   * Initialize analytics tracking for lookbook interactions\n   */\n  function initLookbookTracking() {\n    // Track lookbook item clicks\n    const lookbookLinks = document.querySelectorAll('[data-lookbook-link]');\n    lookbookLinks.forEach((link) => {\n      link.addEventListener('click', () => {\n        const item = link.closest('.lookbook-grid__item');\n        const itemId = item?.getAttribute('data-item-id');\n        const heading = item?.querySelector('.lookbook-grid__overlay-heading')?.textContent?.trim();\n\n        if (typeof window !== 'undefined' && window.gtag) {\n          window.gtag('event', 'lookbook_item_click', {\n            item_id: itemId,\n            item_name: heading,\n            destination_url: (link as HTMLAnchorElement).href,\n            click_location: 'lookbook_grid',\n          });\n        }\n      });\n    });\n\n    // Track product tag clicks\n    const productLinks = document.querySelectorAll('.lookbook-grid__tag-tooltip-link');\n    productLinks.forEach((link) => {\n      link.addEventListener('click', () => {\n        const tag = link.closest('.lookbook-grid__tag');\n        const tagId = tag?.getAttribute('data-tag-id');\n        const productName = tag?.querySelector('.lookbook-grid__tag-tooltip-name')?.textContent?.trim();\n        const item = link.closest('.lookbook-grid__item');\n        const itemId = item?.getAttribute('data-item-id');\n\n        if (typeof window !== 'undefined' && window.gtag) {\n          window.gtag('event', 'lookbook_product_click', {\n            product_id: tagId,\n            product_name: productName,\n            lookbook_item_id: itemId,\n            destination_url: (link as HTMLAnchorElement).href,\n            click_location: 'lookbook_product_tag',\n          });\n        }\n      });\n    });\n  }\n\n  // Initialize on DOM ready\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initLookbookGrid);\n  } else {\n    initLookbookGrid();\n  }\n\n  // Re-initialize on Astro page transitions\n  document.addEventListener('astro:page-load', initLookbookGrid);\n</script>\n"
}

ðŸ”§ Tool: TodoWrite
Input: {
  "todos": [
    {
      "content": "Create lookbook type definitions in src/types/lookbook.ts",
      "status": "completed",
      "activeForm": "Creating lookbook type definitions"
    },
    {
      "content": "Create LookbookGrid component in src/components/LookbookGrid.astro",
      "status": "completed",
      "activeForm": "Creating LookbookGrid component"
    },
    {
      "content": "Create demo page for lookbook grid at src/pages/demo/lookbook-grid.astro",
      "status": "in_progress",
      "activeForm": "Creating demo page"
    }
  ]
}
Now let me read an existing demo page to understand the structure:

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\pages\\demo\\product-grid.astro"
}
Now let me create the demo page for the LookbookGrid component:

ðŸ”§ Tool: Write
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\pages\\demo\\lookbook-grid.astro",
  "content": "---\n/**\n * Lookbook Grid Demo Page\n * Showcases the LookbookGrid component with various configurations.\n *\n * Demonstrates:\n * - Mixed aspect ratios for editorial layouts\n * - Text overlays with different positions and themes\n * - Shoppable product tags with tooltips\n * - Multiple layout variants (standard, editorial, gallery, masonry)\n * - Featured items with custom sizing\n * - Different gap sizes\n * - Responsive behavior\n *\n * @route /demo/lookbook-grid\n */\n\nimport Layout from '../../layouts/Layout.astro';\nimport LookbookGrid from '../../components/LookbookGrid.astro';\nimport type { LookbookItem } from '../../types/lookbook';\n\n// Demo lookbook items data\nconst demoLookbookItems: LookbookItem[] = [\n  {\n    id: 'look-1',\n    image: {\n      src: '/images/products/product-placeholder.svg',\n      alt: 'Spring Essentials Look'\n    },\n    aspectRatio: '4:5',\n    featured: true,\n    category: 'Spring',\n    textOverlay: {\n      heading: 'Spring Essentials',\n      subheading: 'Fresh picks for the new season',\n      ctaText: 'Shop the Look',\n      position: 'bottom-left',\n      theme: 'dark',\n    },\n    href: '/collections/spring',\n    productTags: [\n      {\n        id: 'tag-1-1',\n        name: 'Linen Blouse',\n        price: { amount: 89.00 },\n        x: 30,\n        y: 40,\n        shopUrl: 'https://shop.example.com/linen-blouse',\n        description: 'Relaxed fit in organic linen'\n      },\n      {\n        id: 'tag-1-2',\n        name: 'Wide Leg Pants',\n        price: { amount: 129.00 },\n        x: 65,\n        y: 70,\n        shopUrl: 'https://shop.example.com/wide-leg-pants',\n        description: 'High-waisted with pleats'\n      }\n    ]\n  },\n  {\n    id: 'look-2',\n    image: {\n      src: '/images/products/product-placeholder.svg',\n      alt: 'Office Ready Collection'\n    },\n    aspectRatio: '1:1',\n    isNew: true,\n    textOverlay: {\n      heading: 'Office Ready',\n      ctaText: 'View Collection',\n      position: 'bottom-center',\n      theme: 'dark',\n      alignment: 'center',\n    },\n    href: '/collections/office',\n    productTags: [\n      {\n        id: 'tag-2-1',\n        name: 'Tailored Blazer',\n        price: { amount: 245.00 },\n        x: 50,\n        y: 35,\n        shopUrl: 'https://shop.example.com/blazer',\n      }\n    ]\n  },\n  {\n    id: 'look-3',\n    image: {\n      src: '/images/products/product-placeholder.svg',\n      alt: 'Weekend Casual Look'\n    },\n    aspectRatio: '3:4',\n    textOverlay: {\n      heading: 'Weekend Vibes',\n      subheading: 'Effortless style for days off',\n      ctaText: 'Explore',\n      position: 'bottom-left',\n      theme: 'gradient',\n    },\n    href: '/collections/weekend',\n    productTags: [\n      {\n        id: 'tag-3-1',\n        name: 'Oversized Sweater',\n        price: { amount: 110.00, originalAmount: 145.00 },\n        x: 45,\n        y: 30,\n        shopUrl: 'https://shop.example.com/sweater',\n      },\n      {\n        id: 'tag-3-2',\n        name: 'Denim Jeans',\n        price: { amount: 135.00 },\n        x: 55,\n        y: 75,\n        shopUrl: 'https://shop.example.com/jeans',\n      }\n    ]\n  },\n  {\n    id: 'look-4',\n    image: {\n      src: '/images/products/product-placeholder.svg',\n      alt: 'Evening Elegance'\n    },\n    aspectRatio: '4:5',\n    category: 'Evening',\n    textOverlay: {\n      heading: 'Evening Elegance',\n      ctaText: 'Shop Now',\n      position: 'center',\n      theme: 'dark',\n      alignment: 'center',\n    },\n    href: '/collections/evening'\n  },\n  {\n    id: 'look-5',\n    image: {\n      src: '/images/products/product-placeholder.svg',\n      alt: 'Minimalist Essentials'\n    },\n    aspectRatio: '1:1',\n    textOverlay: {\n      heading: 'Minimalist',\n      subheading: 'Less is more',\n      position: 'top-left',\n      theme: 'light',\n    },\n    href: '/collections/minimalist',\n    productTags: [\n      {\n        id: 'tag-5-1',\n        name: 'Classic White Tee',\n        price: { amount: 45.00 },\n        x: 50,\n        y: 50,\n        shopUrl: 'https://shop.example.com/white-tee',\n      }\n    ]\n  },\n  {\n    id: 'look-6',\n    image: {\n      src: '/images/products/product-placeholder.svg',\n      alt: 'Summer Breeze'\n    },\n    aspectRatio: '16:9',\n    isNew: true,\n    textOverlay: {\n      heading: 'Summer Breeze',\n      subheading: 'Light & airy pieces for warm days',\n      ctaText: 'Discover',\n      position: 'bottom-right',\n      theme: 'dark',\n      alignment: 'right',\n    },\n    href: '/collections/summer',\n    size: {\n      colSpan: 2\n    }\n  },\n  {\n    id: 'look-7',\n    image: {\n      src: '/images/products/product-placeholder.svg',\n      alt: 'Athleisure Collection'\n    },\n    aspectRatio: '4:5',\n    category: 'Active',\n    href: '/collections/athleisure',\n    productTags: [\n      {\n        id: 'tag-7-1',\n        name: 'Performance Leggings',\n        price: { amount: 78.00 },\n        x: 40,\n        y: 65,\n        shopUrl: 'https://shop.example.com/leggings',\n      },\n      {\n        id: 'tag-7-2',\n        name: 'Sports Bra',\n        price: { amount: 55.00 },\n        x: 60,\n        y: 25,\n        shopUrl: 'https://shop.example.com/sports-bra',\n      }\n    ]\n  },\n  {\n    id: 'look-8',\n    image: {\n      src: '/images/products/product-placeholder.svg',\n      alt: 'Autumn Layers'\n    },\n    aspectRatio: '3:4',\n    featured: true,\n    textOverlay: {\n      heading: 'Layer Up',\n      subheading: 'Autumn essentials',\n      ctaText: 'Shop Layers',\n      position: 'bottom-left',\n      theme: 'dark',\n    },\n    href: '/collections/autumn'\n  }\n];\n\n// Different item sets for various demos\nconst items4 = demoLookbookItems.slice(0, 4);\nconst items6 = demoLookbookItems.slice(0, 6);\nconst items8 = demoLookbookItems;\n\n// Items configured for editorial layout\nconst editorialItems: LookbookItem[] = [\n  {\n    id: 'editorial-1',\n    image: { src: '/images/products/product-placeholder.svg', alt: 'Hero Look' },\n    aspectRatio: '16:9',\n    size: { colSpan: 2, rowSpan: 2 },\n    featured: true,\n    textOverlay: {\n      heading: 'The New Collection',\n      subheading: 'Discover our curated selection for the season',\n      ctaText: 'Explore Now',\n      position: 'center',\n      theme: 'dark',\n      alignment: 'center',\n    },\n    href: '/collections/new',\n    productTags: [\n      { id: 'ed-tag-1', name: 'Designer Coat', price: { amount: 450.00 }, x: 35, y: 50, shopUrl: '#' },\n      { id: 'ed-tag-2', name: 'Silk Scarf', price: { amount: 120.00 }, x: 70, y: 30, shopUrl: '#' },\n    ]\n  },\n  {\n    id: 'editorial-2',\n    image: { src: '/images/products/product-placeholder.svg', alt: 'Accessories' },\n    aspectRatio: '1:1',\n    category: 'Accessories',\n    href: '/collections/accessories'\n  },\n  {\n    id: 'editorial-3',\n    image: { src: '/images/products/product-placeholder.svg', alt: 'Shoes' },\n    aspectRatio: '4:5',\n    textOverlay: {\n      heading: 'Step Into Style',\n      ctaText: 'Shop Shoes',\n      position: 'bottom-center',\n      theme: 'dark',\n      alignment: 'center',\n    },\n    href: '/collections/shoes'\n  },\n  {\n    id: 'editorial-4',\n    image: { src: '/images/products/product-placeholder.svg', alt: 'Bags' },\n    aspectRatio: '1:1',\n    isNew: true,\n    href: '/collections/bags'\n  },\n  {\n    id: 'editorial-5',\n    image: { src: '/images/products/product-placeholder.svg', alt: 'Jewelry' },\n    aspectRatio: '3:4',\n    category: 'Jewelry',\n    textOverlay: {\n      heading: 'Fine Details',\n      position: 'top-left',\n      theme: 'light',\n    },\n    href: '/collections/jewelry'\n  },\n];\n\n// Simple items without overlays for gallery layout\nconst galleryItems: LookbookItem[] = Array.from({ length: 9 }, (_, i) => ({\n  id: `gallery-${i + 1}`,\n  image: { src: '/images/products/product-placeholder.svg', alt: `Gallery image ${i + 1}` },\n  aspectRatio: '1:1' as const,\n  href: `/collections/gallery-${i + 1}`,\n}));\n---\n\n<Layout\n  title=\"Lookbook Grid Demo\"\n  description=\"Demo page showcasing the LookbookGrid component with mixed aspect ratios, text overlays, and shoppable product tags.\"\n>\n  <main class=\"demo-page\">\n    <div class=\"demo-page__container\">\n      <!-- Page Header -->\n      <header class=\"demo-page__header\">\n        <h1 class=\"demo-page__title\">Lookbook Grid Component</h1>\n        <p class=\"demo-page__description\">\n          A lookbook-style grid component with mixed aspect ratios, text overlays, and shoppable product tags.\n          Perfect for creating curated seasonal collections or style guides.\n        </p>\n      </header>\n\n      <!-- Demo Sections -->\n      <div class=\"demo-page__sections\">\n\n        <!-- Standard 3-Column with Product Tags -->\n        <section class=\"demo-section\" data-testid=\"lookbook-standard\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">Standard Layout with Product Tags</h2>\n            <p class=\"demo-section__description\">3-column grid with shoppable product tags and text overlays</p>\n            <code class=\"demo-section__code\">columns={3} layout=\"standard\" enableTooltips={true}</code>\n          </div>\n          <LookbookGrid\n            items={items6}\n            columns={3}\n            layout=\"standard\"\n            heading=\"Shop The Look\"\n            subheading=\"Hover over items to discover shoppable products\"\n            gap=\"medium\"\n            enableAnimation={false}\n            enableTooltips={true}\n            id=\"lookbook-standard\"\n          />\n        </section>\n\n        <!-- Editorial Layout -->\n        <section class=\"demo-section\" data-testid=\"lookbook-editorial\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">Editorial Layout</h2>\n            <p class=\"demo-section__description\">Magazine-style mixed sizes with featured hero image</p>\n            <code class=\"demo-section__code\">columns={3} layout=\"editorial\"</code>\n          </div>\n          <LookbookGrid\n            items={editorialItems}\n            columns={3}\n            layout=\"editorial\"\n            heading=\"Editorial Collection\"\n            subheading=\"Curated looks styled by our creative team\"\n            gap=\"medium\"\n            enableAnimation={false}\n            enableTooltips={true}\n            id=\"lookbook-editorial\"\n          />\n        </section>\n\n        <!-- Featured First Layout -->\n        <section class=\"demo-section\" data-testid=\"lookbook-featured-first\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">Featured First Layout</h2>\n            <p class=\"demo-section__description\">First item spans 2 columns and 2 rows for emphasis</p>\n            <code class=\"demo-section__code\">columns={3} layout=\"featured-first\"</code>\n          </div>\n          <LookbookGrid\n            items={items6}\n            columns={3}\n            layout=\"featured-first\"\n            heading=\"Seasonal Highlights\"\n            gap=\"medium\"\n            enableAnimation={false}\n            enableTooltips={true}\n            id=\"lookbook-featured-first\"\n          />\n        </section>\n\n        <!-- Gallery Layout -->\n        <section class=\"demo-section\" data-testid=\"lookbook-gallery\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">Gallery Layout</h2>\n            <p class=\"demo-section__description\">Clean photo gallery style with minimal gaps and square images</p>\n            <code class=\"demo-section__code\">columns={3} layout=\"gallery\" gap=\"none\"</code>\n          </div>\n          <LookbookGrid\n            items={galleryItems}\n            columns={3}\n            layout=\"gallery\"\n            heading=\"Gallery View\"\n            gap=\"none\"\n            enableAnimation={false}\n            enableTooltips={false}\n            id=\"lookbook-gallery\"\n          />\n        </section>\n\n        <!-- Masonry Layout -->\n        <section class=\"demo-section\" data-testid=\"lookbook-masonry\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">Masonry Layout</h2>\n            <p class=\"demo-section__description\">Pinterest-style staggered grid with varied heights</p>\n            <code class=\"demo-section__code\">columns={3} layout=\"masonry\"</code>\n          </div>\n          <LookbookGrid\n            items={items6}\n            columns={3}\n            layout=\"masonry\"\n            heading=\"Inspiration Board\"\n            subheading=\"Visual rhythm with varied proportions\"\n            gap=\"medium\"\n            enableAnimation={false}\n            id=\"lookbook-masonry\"\n          />\n        </section>\n\n        <!-- 4-Column Grid -->\n        <section class=\"demo-section\" data-testid=\"lookbook-4-columns\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">4-Column Grid</h2>\n            <p class=\"demo-section__description\">Dense grid layout for maximum content display</p>\n            <code class=\"demo-section__code\">columns={4} layout=\"standard\"</code>\n          </div>\n          <LookbookGrid\n            items={items8}\n            columns={4}\n            layout=\"standard\"\n            gap=\"small\"\n            enableAnimation={false}\n            enableTooltips={true}\n            id=\"lookbook-4-col\"\n          />\n        </section>\n\n        <!-- 2-Column Grid -->\n        <section class=\"demo-section\" data-testid=\"lookbook-2-columns\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">2-Column Grid</h2>\n            <p class=\"demo-section__description\">Spacious layout for larger images</p>\n            <code class=\"demo-section__code\">columns={2} layout=\"standard\" gap=\"large\"</code>\n          </div>\n          <LookbookGrid\n            items={items4}\n            columns={2}\n            layout=\"standard\"\n            gap=\"large\"\n            enableAnimation={false}\n            enableTooltips={true}\n            id=\"lookbook-2-col\"\n          />\n        </section>\n\n        <!-- Tags Always Visible -->\n        <section class=\"demo-section\" data-testid=\"lookbook-tags-visible\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">Product Tags Always Visible</h2>\n            <p class=\"demo-section__description\">Show shoppable tags by default, not just on hover</p>\n            <code class=\"demo-section__code\">showTagsByDefault={true}</code>\n          </div>\n          <LookbookGrid\n            items={items4}\n            columns={2}\n            layout=\"standard\"\n            gap=\"medium\"\n            enableAnimation={false}\n            showTagsByDefault={true}\n            enableTooltips={true}\n            id=\"lookbook-tags-visible\"\n          />\n        </section>\n\n        <!-- Text Overlay Positions -->\n        <section class=\"demo-section\" data-testid=\"lookbook-overlay-positions\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">Text Overlay Positions</h2>\n            <p class=\"demo-section__description\">Different overlay positions and themes</p>\n          </div>\n          <LookbookGrid\n            items={[\n              {\n                id: 'pos-1',\n                image: { src: '/images/products/product-placeholder.svg', alt: 'Top Left' },\n                aspectRatio: '1:1',\n                textOverlay: {\n                  heading: 'Top Left',\n                  subheading: 'Light theme',\n                  position: 'top-left',\n                  theme: 'light',\n                },\n                href: '#'\n              },\n              {\n                id: 'pos-2',\n                image: { src: '/images/products/product-placeholder.svg', alt: 'Top Center' },\n                aspectRatio: '1:1',\n                textOverlay: {\n                  heading: 'Top Center',\n                  subheading: 'Dark theme',\n                  position: 'top-center',\n                  theme: 'dark',\n                  alignment: 'center',\n                },\n                href: '#'\n              },\n              {\n                id: 'pos-3',\n                image: { src: '/images/products/product-placeholder.svg', alt: 'Center' },\n                aspectRatio: '1:1',\n                textOverlay: {\n                  heading: 'Center',\n                  subheading: 'Gradient theme',\n                  position: 'center',\n                  theme: 'gradient',\n                  alignment: 'center',\n                },\n                href: '#'\n              },\n              {\n                id: 'pos-4',\n                image: { src: '/images/products/product-placeholder.svg', alt: 'Bottom Left' },\n                aspectRatio: '1:1',\n                textOverlay: {\n                  heading: 'Bottom Left',\n                  ctaText: 'Learn More',\n                  position: 'bottom-left',\n                  theme: 'dark',\n                },\n                href: '#'\n              },\n              {\n                id: 'pos-5',\n                image: { src: '/images/products/product-placeholder.svg', alt: 'Bottom Center' },\n                aspectRatio: '1:1',\n                textOverlay: {\n                  heading: 'Bottom Center',\n                  ctaText: 'Explore',\n                  position: 'bottom-center',\n                  theme: 'dark',\n                  alignment: 'center',\n                },\n                href: '#'\n              },\n              {\n                id: 'pos-6',\n                image: { src: '/images/products/product-placeholder.svg', alt: 'Bottom Right' },\n                aspectRatio: '1:1',\n                textOverlay: {\n                  heading: 'Bottom Right',\n                  ctaText: 'Shop Now',\n                  position: 'bottom-right',\n                  theme: 'dark',\n                  alignment: 'right',\n                },\n                href: '#'\n              },\n            ]}\n            columns={3}\n            layout=\"standard\"\n            gap=\"medium\"\n            enableAnimation={false}\n            id=\"lookbook-overlay-positions\"\n          />\n        </section>\n\n        <!-- Animated Grid -->\n        <section class=\"demo-section\" data-testid=\"lookbook-animated\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">Animated Grid (Scroll)</h2>\n            <p class=\"demo-section__description\">Stagger animation on scroll with Intersection Observer</p>\n            <code class=\"demo-section__code\">enableAnimation={true} maxStaggerItems={12}</code>\n          </div>\n          <LookbookGrid\n            items={items8}\n            columns={4}\n            layout=\"standard\"\n            heading=\"Scroll to Reveal\"\n            subheading=\"Items animate in as you scroll\"\n            gap=\"medium\"\n            enableAnimation={true}\n            maxStaggerItems={12}\n            enableTooltips={true}\n            id=\"lookbook-animated\"\n          />\n        </section>\n\n        <!-- Custom Responsive Columns -->\n        <section class=\"demo-section\" data-testid=\"lookbook-responsive\">\n          <div class=\"demo-section__header\">\n            <h2 class=\"demo-section__title\">Custom Responsive Breakpoints</h2>\n            <p class=\"demo-section__description\">Override default responsive column counts</p>\n            <code class=\"demo-section__code\">responsiveColumns=&#123;mobile: 1, tablet: 2, desktop: 4&#125;</code>\n          </div>\n          <LookbookGrid\n            items={items8}\n            columns={4}\n            layout=\"standard\"\n            gap=\"medium\"\n            enableAnimation={false}\n            responsiveColumns={{\n              mobile: 1,\n              tablet: 2,\n              desktop: 4\n            }}\n            id=\"lookbook-responsive\"\n          />\n        </section>\n\n      </div>\n    </div>\n  </main>\n</Layout>\n\n<style>\n  /* =================================================================\n   * DEMO PAGE STYLES\n   * ================================================================= */\n\n  .demo-page {\n    padding: var(--spacing-8) 0 var(--spacing-16);\n    background-color: var(--color-background);\n  }\n\n  .demo-page__container {\n    width: 100%;\n    max-width: var(--container-7xl);\n    margin: 0 auto;\n    padding: 0 var(--spacing-4);\n  }\n\n  /* =================================================================\n   * HEADER\n   * ================================================================= */\n  .demo-page__header {\n    text-align: center;\n    margin-bottom: var(--spacing-12);\n    padding-bottom: var(--spacing-8);\n    border-bottom: 1px solid var(--color-border);\n  }\n\n  .demo-page__title {\n    margin: 0 0 var(--spacing-4);\n    font-family: var(--font-heading);\n    font-size: var(--font-size-4xl);\n    font-weight: var(--font-weight-bold);\n    line-height: var(--line-height-tight);\n    color: var(--color-text-primary);\n  }\n\n  .demo-page__description {\n    margin: 0 auto;\n    max-width: 600px;\n    font-family: var(--font-body);\n    font-size: var(--font-size-lg);\n    color: var(--color-text-secondary);\n    line-height: var(--line-height-relaxed);\n  }\n\n  /* =================================================================\n   * DEMO SECTIONS\n   * ================================================================= */\n  .demo-page__sections {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-16);\n  }\n\n  .demo-section {\n    padding: var(--spacing-8) 0;\n    border-bottom: 1px solid var(--color-border-light);\n  }\n\n  .demo-section:last-child {\n    border-bottom: none;\n  }\n\n  .demo-section__header {\n    text-align: center;\n    margin-bottom: var(--spacing-8);\n  }\n\n  .demo-section__title {\n    margin: 0 0 var(--spacing-2);\n    font-family: var(--font-heading);\n    font-size: var(--font-size-2xl);\n    font-weight: var(--font-weight-bold);\n    color: var(--color-text-primary);\n  }\n\n  .demo-section__description {\n    margin: 0 0 var(--spacing-3);\n    font-family: var(--font-body);\n    font-size: var(--font-size-base);\n    color: var(--color-text-secondary);\n  }\n\n  .demo-section__code {\n    display: inline-block;\n    padding: var(--spacing-1) var(--spacing-3);\n    background-color: var(--color-background-muted);\n    border-radius: var(--radius-md);\n    font-family: var(--font-mono);\n    font-size: var(--font-size-sm);\n    color: var(--color-primary);\n  }\n\n  /* =================================================================\n   * RESPONSIVE STYLES\n   * ================================================================= */\n  @media screen and (max-width: 767px) {\n    .demo-page {\n      padding: var(--spacing-4) 0 var(--spacing-12);\n    }\n\n    .demo-page__title {\n      font-size: var(--font-size-2xl);\n    }\n\n    .demo-page__description {\n      font-size: var(--font-size-base);\n    }\n\n    .demo-section__title {\n      font-size: var(--font-size-xl);\n    }\n\n    .demo-page__sections {\n      gap: var(--spacing-10);\n    }\n  }\n</style>\n"
}

ðŸ”§ Tool: TodoWrite
Input: {
  "todos": [
    {
      "content": "Create lookbook type definitions in src/types/lookbook.ts",
      "status": "completed",
      "activeForm": "Creating lookbook type definitions"
    },
    {
      "content": "Create LookbookGrid component in src/components/LookbookGrid.astro",
      "status": "completed",
      "activeForm": "Creating LookbookGrid component"
    },
    {
      "content": "Create demo page for lookbook grid at src/pages/demo/lookbook-grid.astro",
      "status": "completed",
      "activeForm": "Creating demo page"
    }
  ]
}
Now let me verify the implementation by checking that all the imports and dependencies work correctly. Let me also make sure the types are exported properly:

ðŸ”§ Tool: Read
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\types\\index.ts"
}
I need to add the lookbook types to the index.ts file:

ðŸ”§ Tool: Edit
Input: {
  "file_path": "C:\\Users\\James\\Repos\\retail-business\\src\\types\\index.ts",
  "old_string": "export {\n  getCollectionAspectRatioCss,\n  formatItemCount,\n  getOverlayPositionStyles,\n} from './collection';",
  "new_string": "export {\n  getCollectionAspectRatioCss,\n  formatItemCount,\n  getOverlayPositionStyles,\n} from './collection';\n\n// Lookbook Types\nexport type {\n  LookbookAspectRatio,\n  OverlayPosition,\n  LookbookTextOverlay,\n  ProductTag,\n  LookbookItemSize,\n  LookbookItem,\n  LookbookLayout,\n  LookbookGridProps,\n} from './lookbook';\n\nexport {\n  getLookbookAspectRatioCss,\n  getOverlayPositionClass,\n  validateTagPosition,\n} from './lookbook';"
}
Now let me verify the build works by running the Astro build:

ðŸ”§ Tool: Bash
Input: {
  "command": "cd \"C:\\Users\\James\\Repos\\retail-business\" && npm run build 2>&1 | head -100",
  "description": "Build Astro project to verify",
  "timeout": 120000
}
The build completed successfully. The lookbook grid demo page was built at `/demo/lookbook-grid/index.html`. Let me verify that the generated HTML looks correct:

ðŸ”§ Tool: Bash
Input: {
  "command": "cd \"C:\\Users\\James\\Repos\\retail-business\" && head -200 dist/demo/lookbook-grid/index.html 2>&1",
  "description": "Check generated HTML"
}
The build is successful and the HTML is being generated correctly. The lookbook grid component is properly rendering with all the features:

1. Product tags with proper positioning
2. Text overlays with different positions and themes
3. Badges (new, featured, category)
4. UTM tracking for links
5. Proper accessibility attributes

<summary>
## Summary: Lookbook Grid Component

### Changes Implemented
- Created a comprehensive lookbook-style grid component with mixed aspect ratios, text overlays, and shoppable product tags
- Designed for creating curated seasonal collections or style guides
- Full accessibility support (WCAG 2.1 AA) with ARIA labels, keyboard navigation, and focus management
- Dark mode and reduced motion support
- Responsive design with customizable breakpoints
- Stagger animation on scroll using Intersection Observer
- UTM tracking integration for shop links and product tags
- Analytics tracking for lookbook and product click events

### Files Modified
1. **src/types/lookbook.ts** (NEW)
   - Type definitions for lookbook items, text overlays, product tags, grid layouts
   - Utility functions for aspect ratio CSS conversion and tag position validation
   - Support for 7 different aspect ratios (1:1, 4:5, 3:4, 16:9, 2:3, 9:16, 3:2)
   - 9 text overlay positions with 3 theme variants (light, dark, gradient)

2. **src/components/LookbookGrid.astro** (NEW)
   - Main lookbook grid component with full feature set
   - Features: mixed aspect ratios, text overlays, product tags with hover tooltips
   - 5 layout variants: standard, editorial, featured-first, masonry, gallery
   - 4 gap sizes: none, small, medium, large
   - Responsive grid columns (2-4 columns)
   - Product tags show on hover with animated pulse effect
   - Tooltips with product info, price, and shop link

3. **src/pages/demo/lookbook-grid.astro** (NEW)
   - Comprehensive demo page showcasing all component features
   - 10 different demo sections including:
     - Standard layout with product tags
     - Editorial magazine-style layout
     - Featured-first layout
     - Gallery layout
     - Masonry layout
     - 2-column and 4-column variations
     - Tags always visible mode
     - Text overlay position examples
     - Animated scroll reveal
     - Custom responsive breakpoints

4. **src/types/index.ts** (MODIFIED)
   - Added exports for all lookbook types and utility functions

### Notes for Developer
- The component is accessible at `/demo/lookbook-grid` for testing
- Product tags show on item hover by default; use `showTagsByDefault={true}` to always show
- Tooltips are enabled by default; disable with `enableTooltips={false}`
- The component integrates with existing shop tracking utilities for UTM parameters
- Analytics events are tracked for both lookbook item clicks and product tag clicks
- For production, replace placeholder images with actual product photography
- The component supports WebP images via the `srcWebP` property in ProductImage
</summary>