---
/**
 * Demo Page - SizeGuideModal Component
 * Showcases the size guide modal with clothing and jewelry tabs
 */

import Layout from '../../layouts/Layout.astro';
import SizeGuideModal from '../../components/SizeGuideModal.astro';
---

<Layout title="Size Guide Demo | Houston Web Services">
  <main class="demo-page">
    <section class="demo-header">
      <div class="demo-container">
        <h1>Size Guide Modal Demo</h1>
        <p>An accessible modal for displaying size guides with measurement tables, fit recommendations, and conversion charts.</p>
      </div>
    </section>

    <section class="demo-section">
      <div class="demo-container">
        <h2>Trigger Size Guide</h2>
        <p>Click the buttons below to open the size guide modal with different tabs.</p>

        <div class="demo-buttons">
          <button
            type="button"
            class="demo-button"
            data-size-guide-trigger
            data-size-guide-category="clothing"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" width="20" height="20">
              <path d="M20.38 3.46L16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"/>
            </svg>
            Open Clothing Size Guide
          </button>

          <button
            type="button"
            class="demo-button demo-button--secondary"
            data-size-guide-trigger
            data-size-guide-category="jewelry"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" width="20" height="20">
              <circle cx="12" cy="12" r="10"/>
              <circle cx="12" cy="12" r="6"/>
              <circle cx="12" cy="12" r="2"/>
            </svg>
            Open Jewelry Size Guide
          </button>
        </div>
      </div>
    </section>

    <section class="demo-section">
      <div class="demo-container">
        <h2>Features</h2>
        <ul class="demo-features">
          <li>Tabbed interface for clothing and jewelry sizing</li>
          <li>Responsive measurement tables</li>
          <li>Size conversion charts (US, EU, UK)</li>
          <li>How to measure guides</li>
          <li>Fit recommendations</li>
          <li>Full keyboard navigation (ESC to close, Tab trapping)</li>
          <li>WCAG 2.1 AA accessible</li>
          <li>Dark mode support</li>
          <li>Reduced motion support</li>
        </ul>
      </div>
    </section>
  </main>

  {/* Size Guide Modal */}
  <SizeGuideModal id="size-guide-modal" />
</Layout>

<style>
  .demo-page {
    min-height: 100vh;
    background: var(--color-background-subtle, #f8fafc);
  }

  .demo-header {
    padding: var(--spacing-16, 4rem) var(--spacing-4, 1rem);
    background: var(--color-primary, #365395);
    color: var(--color-text-inverse, #fff);
    text-align: center;
  }

  .demo-header h1 {
    margin: 0 0 var(--spacing-4, 1rem);
    font-size: var(--font-size-3xl, 2.25rem);
    font-weight: var(--font-weight-bold, 700);
  }

  .demo-header p {
    margin: 0;
    font-size: var(--font-size-lg, 1.25rem);
    opacity: 0.9;
    max-width: 600px;
    margin-inline: auto;
  }

  .demo-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 var(--spacing-4, 1rem);
  }

  .demo-section {
    padding: var(--spacing-12, 3rem) var(--spacing-4, 1rem);
    background: var(--color-background, #fff);
    border-bottom: 1px solid var(--color-border, #e5e7eb);
  }

  .demo-section h2 {
    margin: 0 0 var(--spacing-4, 1rem);
    font-size: var(--font-size-2xl, 1.875rem);
    font-weight: var(--font-weight-bold, 700);
    color: var(--color-text-primary, #111827);
  }

  .demo-section p {
    margin: 0 0 var(--spacing-6, 1.5rem);
    font-size: var(--font-size-base, 1rem);
    color: var(--color-text-secondary, #4b5563);
    line-height: var(--line-height-relaxed, 1.625);
  }

  .demo-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-4, 1rem);
  }

  .demo-button {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-2, 0.5rem);
    padding: var(--spacing-3, 0.75rem) var(--spacing-6, 1.5rem);
    font-size: var(--font-size-base, 1rem);
    font-weight: var(--font-weight-semibold, 600);
    color: var(--color-text-inverse, #fff);
    background: var(--color-primary, #365395);
    border: none;
    border-radius: var(--radius-lg, 0.5rem);
    cursor: pointer;
    transition: all 150ms ease;
  }

  .demo-button:hover {
    background: var(--color-primary-hover, #304b8d);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md, 0 4px 6px -1px rgba(0, 0, 0, 0.1));
  }

  .demo-button:focus-visible {
    outline: 2px solid var(--color-primary, #365395);
    outline-offset: 2px;
  }

  .demo-button--secondary {
    background: var(--color-accent, #8b5cf6);
  }

  .demo-button--secondary:hover {
    background: var(--color-accent-dark, #7c3aed);
  }

  .demo-features {
    margin: 0;
    padding-left: var(--spacing-6, 1.5rem);
    list-style-type: disc;
    color: var(--color-text-secondary, #4b5563);
    line-height: 2;
  }

  .demo-features li {
    padding-left: var(--spacing-2, 0.5rem);
  }
</style>

<script>
  // Initialize size guide triggers
  function initSizeGuideDemo() {
    const triggers = document.querySelectorAll('[data-size-guide-trigger]');

    triggers.forEach(trigger => {
      trigger.addEventListener('click', () => {
        const category = (trigger as HTMLElement).dataset.sizeGuideCategory || 'clothing';

        document.dispatchEvent(new CustomEvent('sizeguide:open', {
          detail: { category }
        }));
      });
    });
  }

  // Initialize on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initSizeGuideDemo);
  } else {
    initSizeGuideDemo();
  }

  // Re-initialize on Astro page transitions
  document.addEventListener('astro:page-load', initSizeGuideDemo);
</script>
