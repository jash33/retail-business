---
/**
 * VideoHero Component
 * A cinematic hero section with looping video backgrounds optimized for brand storytelling.
 *
 * Features:
 * - Looping video backgrounds with multiple source format support (WebM + MP4)
 * - Fallback image displayed before video loads and for unsupported browsers
 * - Autoplay controls with user-configurable behavior
 * - Reduced-motion alternative (shows static fallback image, pauses video)
 * - Loading state with shimmer placeholder
 * - Configurable overlay opacity and gradient direction
 * - Flexible content positioning (9 positions)
 * - Mobile-first responsive design
 * - WCAG 2.1 AA compliant with proper focus management
 * - GPU-accelerated animations for smooth 60fps performance
 * - Pause/play toggle button for user control
 *
 * @example Basic usage with video
 * ```astro
 * <VideoHero
 *   headline="Your Brand Story"
 *   subheadline="Immersive experiences that captivate"
 *   videoSrc="/videos/brand-story.mp4"
 *   fallbackImage="/images/hero-fallback.jpg"
 *   cta={{ text: "Explore", href: "/story" }}
 * />
 * ```
 *
 * @example With multiple video sources and custom positioning
 * ```astro
 * <VideoHero
 *   headline="Crafted Excellence"
 *   videoSrc="/videos/hero.mp4"
 *   videoSrcWebm="/videos/hero.webm"
 *   fallbackImage="/images/hero-poster.jpg"
 *   overlayPosition="center"
 *   overlayGradient="radial"
 *   autoplay={true}
 *   showPlayPauseButton={true}
 * />
 * ```
 */

import type { VideoHeroProps } from '../types/hero';
import Button from './Button.astro';

interface Props extends VideoHeroProps {}

const {
  headline,
  subheadline,
  cta,
  videoSrc,
  videoSrcWebm,
  fallbackImage,
  posterImage,
  autoplay = true,
  loop = true,
  muted = true,
  playbackRate = 1,
  showPlayPauseButton = true,
  overlayPosition = 'center',
  overlayOpacity = 0.5,
  overlayGradient = 'linear',
  id = 'video-hero',
  class: className = '',
  minHeight = '100vh',
  animateText = true,
} = Astro.props;

// Use poster image or fallback image as video poster
const videoPoster = posterImage || fallbackImage;

// Compute CSS classes
const sectionClasses = [
  'video-hero',
  `video-hero--overlay-${overlayPosition}`,
  `video-hero--gradient-${overlayGradient}`,
  animateText ? 'video-hero--animate' : '',
  className,
].filter(Boolean).join(' ');

// Compute CSS custom properties for dynamic values
const cssVars = {
  '--video-hero-min-height': minHeight,
  '--video-hero-overlay-opacity': overlayOpacity,
};

const cssVarsString = Object.entries(cssVars)
  .map(([key, value]) => `${key}: ${value}`)
  .join('; ');
---

<section
  class={sectionClasses}
  id={id}
  aria-labelledby={`${id}-headline`}
  style={cssVarsString}
  data-video-hero
>
  <!-- Loading State / Shimmer Placeholder -->
  <div class="video-hero__loading" aria-hidden="true">
    <div class="video-hero__shimmer"></div>
  </div>

  <!-- Background Media Container -->
  <div class="video-hero__media" aria-hidden="true">
    <!-- Fallback Image (shown before video loads and for reduced motion) -->
    {fallbackImage && (
      <div
        class="video-hero__fallback-image"
        style={`background-image: url('${fallbackImage}')`}
      />
    )}

    <!-- Video Element -->
    <video
      class="video-hero__video"
      autoplay={autoplay}
      muted={muted}
      loop={loop}
      playsinline
      poster={videoPoster}
      preload="auto"
      data-playback-rate={playbackRate}
      data-autoplay={autoplay}
    >
      {videoSrcWebm && <source src={videoSrcWebm} type="video/webm" />}
      <source src={videoSrc} type="video/mp4" />
      <!-- Fallback message for browsers that don't support video -->
      Your browser does not support the video tag.
    </video>
  </div>

  <!-- Overlay for text readability -->
  <div class="video-hero__overlay" aria-hidden="true" />

  <!-- Content Container -->
  <div class="video-hero__container">
    <div class="video-hero__content">
      <h1 id={`${id}-headline`} class="video-hero__headline">
        {headline}
      </h1>

      {subheadline && (
        <p class="video-hero__subheadline">
          {subheadline}
        </p>
      )}

      {cta && (
        <div class="video-hero__cta">
          <Button
            text={cta.text}
            href={cta.href}
            variant={cta.variant || 'primary'}
            size="large"
            class="video-hero__button"
          />
        </div>
      )}
    </div>
  </div>

  <!-- Play/Pause Toggle Button -->
  {showPlayPauseButton && (
    <button
      class="video-hero__play-pause"
      type="button"
      aria-label="Pause video"
      data-video-control
    >
      <span class="video-hero__play-pause-icon video-hero__play-pause-icon--pause" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
        </svg>
      </span>
      <span class="video-hero__play-pause-icon video-hero__play-pause-icon--play" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M8 5v14l11-7L8 5z"/>
        </svg>
      </span>
    </button>
  )}

  <!-- Scroll indicator -->
  <div class="video-hero__scroll-indicator" aria-hidden="true">
    <div class="video-hero__scroll-arrow">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 5v14M5 12l7 7 7-7" />
      </svg>
    </div>
  </div>
</section>

<style>
  /* =================================================================
   * VIDEO HERO COMPONENT STYLES
   * =================================================================
   * Cinematic hero section with looping video backgrounds
   * Mobile-first approach with responsive breakpoints
   * Uses design system variables from variables.css
   */

  .video-hero {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: var(--video-hero-min-height, 100vh);
    overflow: hidden;
    background-color: var(--color-primary-900, #0c1830);
  }

  /* =================================================================
   * LOADING STATE
   * =================================================================
   */

  .video-hero__loading {
    position: absolute;
    inset: 0;
    z-index: 0;
    background-color: var(--color-primary-900, #0c1830);
    opacity: 1;
    transition: opacity 0.5s ease-out;
  }

  .video-hero[data-loaded="true"] .video-hero__loading {
    opacity: 0;
    pointer-events: none;
  }

  .video-hero__shimmer {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.03) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: videoHeroShimmer 2s ease-in-out infinite;
  }

  @keyframes videoHeroShimmer {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  /* =================================================================
   * BACKGROUND MEDIA
   * =================================================================
   */

  .video-hero__media {
    position: absolute;
    inset: 0;
    z-index: 1;
  }

  .video-hero__fallback-image {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    z-index: 1;
    transition: opacity 0.5s ease-out;
  }

  /* Hide fallback when video is playing */
  .video-hero[data-video-playing="true"] .video-hero__fallback-image {
    opacity: 0;
  }

  .video-hero__video {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 2;
    opacity: 0;
    transition: opacity 0.5s ease-out;
  }

  /* Show video once it can play */
  .video-hero[data-video-ready="true"] .video-hero__video {
    opacity: 1;
  }

  /* =================================================================
   * OVERLAY STYLES
   * =================================================================
   */

  .video-hero__overlay {
    position: absolute;
    inset: 0;
    z-index: 3;
    pointer-events: none;
  }

  /* Linear gradient overlay (default) - clean vignette */
  .video-hero--gradient-linear .video-hero__overlay {
    background: linear-gradient(
      to top,
      rgba(0, 0, 0, calc(var(--video-hero-overlay-opacity, 0.5) + 0.1)) 0%,
      rgba(0, 0, 0, calc(var(--video-hero-overlay-opacity, 0.5) * 0.4)) 50%,
      rgba(0, 0, 0, calc(var(--video-hero-overlay-opacity, 0.5) * 0.15)) 100%
    );
  }

  /* Radial gradient overlay (for centered content) */
  .video-hero--gradient-radial .video-hero__overlay {
    background: radial-gradient(
      ellipse at center,
      rgba(0, 0, 0, calc(var(--video-hero-overlay-opacity, 0.5) * 0.2)) 0%,
      rgba(0, 0, 0, calc(var(--video-hero-overlay-opacity, 0.5) * 0.6)) 60%,
      rgba(0, 0, 0, calc(var(--video-hero-overlay-opacity, 0.5) + 0.1)) 100%
    );
  }

  /* Solid overlay (uniform darkness) */
  .video-hero--gradient-solid .video-hero__overlay {
    background: rgba(0, 0, 0, var(--video-hero-overlay-opacity, 0.5));
  }

  /* =================================================================
   * CONTENT CONTAINER
   * =================================================================
   */

  .video-hero__container {
    position: relative;
    z-index: 4;
    width: 100%;
    max-width: var(--container-7xl, 80rem);
    margin: 0 auto;
    padding: var(--spacing-8, 2rem) var(--spacing-4, 1rem);
  }

  .video-hero__content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-4, 1rem);
    max-width: 100%;
  }

  /* =================================================================
   * TYPOGRAPHY - Cinematic, refined
   * =================================================================
   */

  .video-hero__headline {
    font-family: var(--font-heading, system-ui, sans-serif);
    font-size: clamp(2.25rem, 7vw, 4.5rem);
    font-weight: var(--font-weight-bold, 700);
    line-height: 1.08;
    letter-spacing: -0.025em;
    color: var(--color-text-inverse, #ffffff);
    margin: 0;
  }

  .video-hero__subheadline {
    font-family: var(--font-body, system-ui, sans-serif);
    font-size: clamp(1rem, 2vw, 1.25rem);
    font-weight: var(--font-weight-normal, 400);
    line-height: 1.7;
    color: rgba(255, 255, 255, 0.85);
    margin: 0;
    max-width: 42ch;
  }

  /* =================================================================
   * CTA BUTTON
   * =================================================================
   */

  .video-hero__cta {
    margin-top: var(--spacing-4, 1rem);
  }

  /* Button styles - minimal, clean aesthetic */
  .video-hero :global(.btn--primary) {
    background-color: var(--color-background, #ffffff);
    color: var(--color-primary-800, #203777);
    border: none;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);
    transition:
      transform 0.2s ease,
      box-shadow 0.2s ease;
  }

  .video-hero :global(.btn--primary:hover:not(.btn--disabled)) {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
    transform: translateY(-2px);
  }

  .video-hero :global(.btn--secondary) {
    background-color: transparent;
    color: var(--color-text-inverse, #ffffff);
    border: 1px solid rgba(255, 255, 255, 0.45);
    transition:
      border-color 0.2s ease,
      background-color 0.2s ease;
  }

  .video-hero :global(.btn--secondary:hover:not(.btn--disabled)) {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.75);
  }

  /* =================================================================
   * PLAY/PAUSE BUTTON
   * =================================================================
   */

  .video-hero__play-pause {
    position: absolute;
    bottom: var(--spacing-6, 1.5rem);
    right: var(--spacing-6, 1.5rem);
    z-index: 5;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    padding: 0;
    background: rgba(0, 0, 0, 0.35);
    border: 1px solid rgba(255, 255, 255, 0.25);
    border-radius: 50%;
    color: rgba(255, 255, 255, 0.8);
    cursor: pointer;
    transition:
      background-color 0.2s ease,
      border-color 0.2s ease,
      color 0.2s ease;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  .video-hero__play-pause:hover {
    background: rgba(0, 0, 0, 0.5);
    border-color: rgba(255, 255, 255, 0.45);
    color: rgba(255, 255, 255, 1);
  }

  .video-hero__play-pause:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.35);
  }

  .video-hero__play-pause:focus-visible {
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.5);
  }

  .video-hero__play-pause-icon {
    width: 20px;
    height: 20px;
    display: none;
  }

  .video-hero__play-pause-icon svg {
    width: 100%;
    height: 100%;
  }

  /* Show pause icon by default (video playing) */
  .video-hero__play-pause-icon--pause {
    display: block;
  }

  /* Toggle icons based on video state */
  .video-hero[data-video-paused="true"] .video-hero__play-pause-icon--pause {
    display: none;
  }

  .video-hero[data-video-paused="true"] .video-hero__play-pause-icon--play {
    display: block;
  }

  /* =================================================================
   * SCROLL INDICATOR
   * =================================================================
   */

  .video-hero__scroll-indicator {
    position: absolute;
    bottom: var(--spacing-6, 1.5rem);
    left: 50%;
    transform: translateX(-50%);
    z-index: 5;
    opacity: 0.7;
    transition: opacity 0.3s ease;
  }

  .video-hero__scroll-indicator:hover {
    opacity: 1;
  }

  .video-hero__scroll-arrow {
    width: 20px;
    height: 20px;
    color: rgba(255, 255, 255, 0.6);
    animation: videoHeroScrollBounce 2.5s ease-in-out infinite;
  }

  .video-hero__scroll-arrow svg {
    width: 100%;
    height: 100%;
  }

  @keyframes videoHeroScrollBounce {
    0%, 100% {
      transform: translateY(0);
      opacity: 0.5;
    }
    50% {
      transform: translateY(6px);
      opacity: 0.8;
    }
  }

  /* =================================================================
   * OVERLAY POSITION VARIANTS
   * =================================================================
   */

  /* Center (default) */
  .video-hero--overlay-center {
    align-items: center;
    justify-content: center;
  }

  .video-hero--overlay-center .video-hero__content {
    align-items: center;
    text-align: center;
  }

  .video-hero--overlay-center .video-hero__subheadline {
    max-width: 55ch;
  }

  /* Bottom Left */
  .video-hero--overlay-bottom-left {
    align-items: flex-end;
    justify-content: flex-start;
  }

  .video-hero--overlay-bottom-left .video-hero__container {
    padding-bottom: var(--spacing-16, 4rem);
  }

  .video-hero--overlay-bottom-left .video-hero__content {
    align-items: flex-start;
    text-align: left;
  }

  /* Bottom Center */
  .video-hero--overlay-bottom-center {
    align-items: flex-end;
    justify-content: center;
  }

  .video-hero--overlay-bottom-center .video-hero__container {
    padding-bottom: var(--spacing-16, 4rem);
  }

  .video-hero--overlay-bottom-center .video-hero__content {
    align-items: center;
    text-align: center;
  }

  /* Bottom Right */
  .video-hero--overlay-bottom-right {
    align-items: flex-end;
    justify-content: flex-end;
  }

  .video-hero--overlay-bottom-right .video-hero__container {
    padding-bottom: var(--spacing-16, 4rem);
  }

  .video-hero--overlay-bottom-right .video-hero__content {
    align-items: flex-end;
    text-align: right;
  }

  /* Top Left */
  .video-hero--overlay-top-left {
    align-items: flex-start;
    justify-content: flex-start;
  }

  .video-hero--overlay-top-left .video-hero__container {
    padding-top: var(--spacing-24, 6rem);
  }

  .video-hero--overlay-top-left .video-hero__content {
    align-items: flex-start;
    text-align: left;
  }

  /* Top Center */
  .video-hero--overlay-top-center {
    align-items: flex-start;
    justify-content: center;
  }

  .video-hero--overlay-top-center .video-hero__container {
    padding-top: var(--spacing-24, 6rem);
  }

  .video-hero--overlay-top-center .video-hero__content {
    align-items: center;
    text-align: center;
  }

  /* Top Right */
  .video-hero--overlay-top-right {
    align-items: flex-start;
    justify-content: flex-end;
  }

  .video-hero--overlay-top-right .video-hero__container {
    padding-top: var(--spacing-24, 6rem);
  }

  .video-hero--overlay-top-right .video-hero__content {
    align-items: flex-end;
    text-align: right;
  }

  /* =================================================================
   * TEXT ANIMATIONS - Subtle, cinematic entrance
   * =================================================================
   */

  .video-hero--animate .video-hero__headline {
    opacity: 0;
    transform: translateY(24px);
    animation: videoHeroFadeIn 0.8s cubic-bezier(0.23, 1, 0.32, 1) 0.2s forwards;
  }

  .video-hero--animate .video-hero__subheadline {
    opacity: 0;
    transform: translateY(16px);
    animation: videoHeroFadeIn 0.7s cubic-bezier(0.23, 1, 0.32, 1) 0.35s forwards;
  }

  .video-hero--animate .video-hero__cta {
    opacity: 0;
    transform: translateY(12px);
    animation: videoHeroFadeIn 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0.5s forwards;
  }

  .video-hero--animate .video-hero__scroll-indicator {
    opacity: 0;
    animation: videoHeroScrollFadeIn 0.6s ease-out 0.7s forwards;
  }

  .video-hero--animate .video-hero__play-pause {
    opacity: 0;
    animation: videoHeroButtonFadeIn 0.4s ease-out 0.8s forwards;
  }

  @keyframes videoHeroFadeIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes videoHeroScrollFadeIn {
    to {
      opacity: 0.7;
    }
  }

  @keyframes videoHeroButtonFadeIn {
    to {
      opacity: 1;
    }
  }

  /* =================================================================
   * RESPONSIVE DESIGN
   * =================================================================
   */

  /* Tablet */
  @media (min-width: 640px) {
    .video-hero__container {
      padding: var(--spacing-12, 3rem) var(--spacing-6, 1.5rem);
    }

    .video-hero__content {
      max-width: 70%;
    }

    .video-hero--overlay-center .video-hero__content {
      max-width: 80%;
    }

    .video-hero__play-pause {
      width: 52px;
      height: 52px;
    }

    .video-hero__play-pause-icon {
      width: 22px;
      height: 22px;
    }
  }

  /* Desktop */
  @media (min-width: 1024px) {
    .video-hero__container {
      padding: var(--spacing-16, 4rem) var(--spacing-8, 2rem);
    }

    .video-hero__content {
      max-width: 55%;
    }

    .video-hero--overlay-center .video-hero__content {
      max-width: 70%;
    }

    .video-hero__scroll-arrow {
      width: 32px;
      height: 32px;
    }

    .video-hero__play-pause {
      width: 56px;
      height: 56px;
      bottom: var(--spacing-8, 2rem);
      right: var(--spacing-8, 2rem);
    }

    .video-hero__play-pause-icon {
      width: 24px;
      height: 24px;
    }
  }

  /* Large Desktop */
  @media (min-width: 1280px) {
    .video-hero__content {
      max-width: 50%;
    }
  }

  /* =================================================================
   * ACCESSIBILITY
   * =================================================================
   */

  /* Reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .video-hero--animate .video-hero__headline,
    .video-hero--animate .video-hero__subheadline,
    .video-hero--animate .video-hero__cta,
    .video-hero--animate .video-hero__scroll-indicator,
    .video-hero--animate .video-hero__play-pause {
      opacity: 1;
      transform: none;
      animation: none;
    }

    .video-hero__scroll-arrow {
      animation: none;
    }

    .video-hero__shimmer {
      animation: none;
    }

    /* Keep fallback visible, hide video for reduced motion */
    .video-hero__video {
      display: none !important;
    }

    .video-hero__fallback-image {
      opacity: 1 !important;
    }

    .video-hero__play-pause {
      display: none;
    }
  }

  /* High contrast mode */
  @media (forced-colors: active) {
    .video-hero__overlay {
      background: rgba(0, 0, 0, 0.7);
    }

    .video-hero__headline,
    .video-hero__subheadline {
      text-shadow: none;
    }

    .video-hero__play-pause {
      border: 2px solid currentColor;
    }
  }

  /* Print styles */
  @media print {
    .video-hero {
      min-height: auto;
      padding: 2rem;
    }

    .video-hero__media,
    .video-hero__loading,
    .video-hero__overlay,
    .video-hero__scroll-indicator,
    .video-hero__play-pause {
      display: none;
    }

    .video-hero__headline,
    .video-hero__subheadline {
      color: #000;
      text-shadow: none;
    }
  }
</style>

<script>
  /**
   * VideoHero Client-side Enhancements
   * - Video loading state management
   * - Play/pause toggle functionality
   * - Playback rate control
   * - Reduced motion handling
   */

  // Check for reduced motion preference
  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');

  function initVideoHero() {
    const videoHeroSections = document.querySelectorAll<HTMLElement>('[data-video-hero]');

    videoHeroSections.forEach((section) => {
      const video = section.querySelector<HTMLVideoElement>('.video-hero__video');
      const playPauseBtn = section.querySelector<HTMLButtonElement>('[data-video-control]');

      if (!video) return;

      // Set initial states
      let isPlaying = false;
      let isVideoReady = false;

      // Handle reduced motion preference
      function handleReducedMotion() {
        if (prefersReducedMotion.matches) {
          video.pause();
          section.setAttribute('data-video-paused', 'true');
          section.setAttribute('data-video-playing', 'false');
        } else if (video.dataset.autoplay === 'true' && isVideoReady) {
          video.play().catch(() => {});
          section.setAttribute('data-video-paused', 'false');
          section.setAttribute('data-video-playing', 'true');
        }
      }

      // Listen for reduced motion preference changes
      prefersReducedMotion.addEventListener('change', handleReducedMotion);

      // Set playback rate
      const playbackRate = parseFloat(video.dataset.playbackRate || '1');
      video.playbackRate = playbackRate;

      // Handle video ready state (can play through)
      video.addEventListener('canplaythrough', () => {
        isVideoReady = true;
        section.setAttribute('data-video-ready', 'true');
        section.setAttribute('data-loaded', 'true');

        // Initial reduced motion check
        handleReducedMotion();
      });

      // Handle video play
      video.addEventListener('play', () => {
        isPlaying = true;
        section.setAttribute('data-video-playing', 'true');
        section.setAttribute('data-video-paused', 'false');
        if (playPauseBtn) {
          playPauseBtn.setAttribute('aria-label', 'Pause video');
        }
      });

      // Handle video pause
      video.addEventListener('pause', () => {
        isPlaying = false;
        section.setAttribute('data-video-playing', 'false');
        section.setAttribute('data-video-paused', 'true');
        if (playPauseBtn) {
          playPauseBtn.setAttribute('aria-label', 'Play video');
        }
      });

      // Handle video ended (for non-looping videos)
      video.addEventListener('ended', () => {
        isPlaying = false;
        section.setAttribute('data-video-playing', 'false');
        section.setAttribute('data-video-paused', 'true');
      });

      // Handle video error - show fallback
      video.addEventListener('error', () => {
        section.setAttribute('data-video-ready', 'false');
        section.setAttribute('data-loaded', 'true');
        console.warn('VideoHero: Video failed to load, showing fallback image');
      });

      // Play/Pause button click handler
      if (playPauseBtn) {
        playPauseBtn.addEventListener('click', () => {
          if (prefersReducedMotion.matches) return;

          if (isPlaying) {
            video.pause();
          } else {
            video.play().catch((err) => {
              console.warn('VideoHero: Could not play video', err);
            });
          }
        });
      }

      // If video is already ready (cached)
      if (video.readyState >= 3) {
        isVideoReady = true;
        section.setAttribute('data-video-ready', 'true');
        section.setAttribute('data-loaded', 'true');
        handleReducedMotion();
      }

      // If autoplay is enabled and video should start
      if (video.dataset.autoplay === 'true' && !prefersReducedMotion.matches) {
        video.play().catch(() => {
          // Autoplay was prevented, show play button state
          section.setAttribute('data-video-paused', 'true');
        });
      }
    });
  }

  // Initialize on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initVideoHero);
  } else {
    initVideoHero();
  }
</script>
